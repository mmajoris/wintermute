{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/lib/collection-mapping.ts"],"sourcesContent":["/**\n * Collection to Brain Region Mapping\n * \n * Maps Qdrant collection names (from Molly's brain architecture) to\n * brain region IDs (from the 3D visualization).\n * \n * Based on the 60-collection architecture in MOLLY-ARCHITECTURE.md\n */\n\nexport const COLLECTION_TO_REGION: Record<string, string> = {\n  // Cerebrum — Higher Cognition\n  system_root: \"left-hemisphere\",\n  cognitive_modules: \"left-hemisphere\",\n  action_dispatch: \"left-hemisphere\",\n  language_output: \"left-hemisphere\",\n  language_comprehension: \"left-hemisphere\",\n  sensory_encoders: \"right-hemisphere\",\n  temporal_processing: \"left-hemisphere\",\n  visual_processing: \"right-hemisphere\",\n  narrative_engine: \"left-hemisphere\",\n  attention_router: \"thalamus\",\n  working_memory: \"left-hemisphere\",\n\n  // Cerebellum — Error Correction\n  error_correction: \"cerebellum\",\n  movement_planning: \"cerebellum\",\n  execution_monitor: \"cerebellum\",\n  balance_system: \"cerebellum\",\n  correction_output: \"cerebellum\",\n  inhibitory_gate: \"cerebellum\",\n\n  // Brainstem — Survival & Autonomic\n  background_processes: \"midbrain\",\n  reflex_engine: \"midbrain\",\n  dopamine_regulation: \"substantia-nigra\",\n  motivation_signals: \"substantia-nigra\",\n  relay_processors: \"pons\",\n  alertness_state: \"pons\",\n  mood_regulation: \"pons\",\n  vital_controllers: \"medulla\",\n  cardiac_oscillator: \"medulla\",\n  respiratory_oscillator: \"medulla\",\n  pressure_regulation: \"medulla\",\n  visceral_input: \"medulla\",\n\n  // Limbic System — Memory & Emotion\n  memory_embeddings: \"hippocampus\",\n  memory_consolidation: \"hippocampus\",\n  pattern_completion: \"hippocampus\",\n  pattern_separation: \"dentate-gyrus\",\n  state_modulators: \"amygdala\",\n  action_selector: \"caudate-nucleus\",\n  reward_signals: \"nucleus-accumbens\",\n  signal_router: \"thalamus\",\n  homeostasis_controller: \"hypothalamus\",\n  circadian_clock: \"hypothalamus\",\n  conflict_monitor: \"caudate-nucleus\",\n  hemisphere_bridge: \"corpus-callosum\",\n  body_state_monitor: \"hypothalamus\",\n\n  // Autonomic Nervous System\n  autonomic_engine: \"medulla\",\n  activation_signals: \"midbrain\",\n  restoration_signals: \"pons\",\n  global_state_modifier: \"cn-x\", // Vagus nerve\n  gut_processor: \"cn-x\",\n  oscillation_generator: \"medulla\",\n\n  // Pathways\n  input_pipelines: \"thalamus\",\n  output_pipelines: \"left-hemisphere\",\n  fast_response_loops: \"midbrain\",\n  integration_buses: \"corpus-callosum\",\n\n  // Cellular / Microscopic\n  processing_units: \"left-hemisphere\",\n  excitatory_nodes: \"left-hemisphere\",\n  inhibitory_nodes: \"globus-pallidus\",\n  support_infrastructure: \"ventricles\",\n  connection_interfaces: \"corpus-callosum\",\n  signal_molecules: \"hypothalamus\",\n  reward_signal: \"nucleus-accumbens\",\n  mood_baseline: \"pons\",\n};\n\nexport const REGION_TO_COLLECTIONS: Record<string, string[]> = {};\nfor (const [collection, region] of Object.entries(COLLECTION_TO_REGION)) {\n  if (!REGION_TO_COLLECTIONS[region]) {\n    REGION_TO_COLLECTIONS[region] = [];\n  }\n  REGION_TO_COLLECTIONS[region].push(collection);\n}\n\nexport const WORKER_TO_REGION: Record<string, string> = {\n  \"input-classifier\": \"thalamus\",\n  \"pattern-separator\": \"dentate-gyrus\",\n  \"emotional-tagger\": \"amygdala\",\n  \"memory-writer\": \"hippocampus\",\n  \"memory-retriever\": \"hippocampus\",\n  \"action-gate\": \"caudate-nucleus\",\n  \"reward-predictor\": \"nucleus-accumbens\",\n  \"error-corrector\": \"cerebellum\",\n  \"sensory-integrator\": \"corpus-callosum\",\n  \"action-dispatcher\": \"left-hemisphere\",\n  \"executive-controller\": \"left-hemisphere\",\n  \"narrative-engine\": \"left-hemisphere\",\n};\n\nexport const QUEUE_TO_REGION: Record<string, string> = {\n  \"input-raw\": \"thalamus\",\n  \"classify-result\": \"thalamus\",\n  \"memory-write\": \"hippocampus\",\n  \"memory-retrieve\": \"hippocampus\",\n  \"action-evaluate\": \"caudate-nucleus\",\n  \"action-execute\": \"left-hemisphere\",\n  \"reward-compute\": \"nucleus-accumbens\",\n  \"reflection\": \"left-hemisphere\",\n  \"thought\": \"left-hemisphere\",\n};\n\nexport function getRegionForCollection(collection: string): string | null {\n  return COLLECTION_TO_REGION[collection] ?? null;\n}\n\nexport function getRegionForWorker(worker: string): string | null {\n  return WORKER_TO_REGION[worker] ?? null;\n}\n\nexport function getRegionForQueue(queue: string): string | null {\n  return QUEUE_TO_REGION[queue] ?? null;\n}\n\nexport function getCollectionsForRegion(region: string): string[] {\n  return REGION_TO_COLLECTIONS[region] ?? [];\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;;;;;;;;;;;;;;AAEM,MAAM,uBAA+C;IAC1D,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,iBAAiB;IACjB,iBAAiB;IACjB,wBAAwB;IACxB,kBAAkB;IAClB,qBAAqB;IACrB,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;IAClB,gBAAgB;IAEhB,gCAAgC;IAChC,kBAAkB;IAClB,mBAAmB;IACnB,mBAAmB;IACnB,gBAAgB;IAChB,mBAAmB;IACnB,iBAAiB;IAEjB,mCAAmC;IACnC,sBAAsB;IACtB,eAAe;IACf,qBAAqB;IACrB,oBAAoB;IACpB,kBAAkB;IAClB,iBAAiB;IACjB,iBAAiB;IACjB,mBAAmB;IACnB,oBAAoB;IACpB,wBAAwB;IACxB,qBAAqB;IACrB,gBAAgB;IAEhB,mCAAmC;IACnC,mBAAmB;IACnB,sBAAsB;IACtB,oBAAoB;IACpB,oBAAoB;IACpB,kBAAkB;IAClB,iBAAiB;IACjB,gBAAgB;IAChB,eAAe;IACf,wBAAwB;IACxB,iBAAiB;IACjB,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;IAEpB,2BAA2B;IAC3B,kBAAkB;IAClB,oBAAoB;IACpB,qBAAqB;IACrB,uBAAuB;IACvB,eAAe;IACf,uBAAuB;IAEvB,WAAW;IACX,iBAAiB;IACjB,kBAAkB;IAClB,qBAAqB;IACrB,mBAAmB;IAEnB,yBAAyB;IACzB,kBAAkB;IAClB,kBAAkB;IAClB,kBAAkB;IAClB,wBAAwB;IACxB,uBAAuB;IACvB,kBAAkB;IAClB,eAAe;IACf,eAAe;AACjB;AAEO,MAAM,wBAAkD,CAAC;AAChE,KAAK,MAAM,CAAC,YAAY,OAAO,IAAI,OAAO,OAAO,CAAC,sBAAuB;IACvE,IAAI,CAAC,qBAAqB,CAAC,OAAO,EAAE;QAClC,qBAAqB,CAAC,OAAO,GAAG,EAAE;IACpC;IACA,qBAAqB,CAAC,OAAO,CAAC,IAAI,CAAC;AACrC;AAEO,MAAM,mBAA2C;IACtD,oBAAoB;IACpB,qBAAqB;IACrB,oBAAoB;IACpB,iBAAiB;IACjB,oBAAoB;IACpB,eAAe;IACf,oBAAoB;IACpB,mBAAmB;IACnB,sBAAsB;IACtB,qBAAqB;IACrB,wBAAwB;IACxB,oBAAoB;AACtB;AAEO,MAAM,kBAA0C;IACrD,aAAa;IACb,mBAAmB;IACnB,gBAAgB;IAChB,mBAAmB;IACnB,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;IAClB,cAAc;IACd,WAAW;AACb;AAEO,SAAS,uBAAuB,UAAkB;QAChD;IAAP,OAAO,CAAA,mCAAA,oBAAoB,CAAC,WAAW,cAAhC,8CAAA,mCAAoC;AAC7C;AAEO,SAAS,mBAAmB,MAAc;QACxC;IAAP,OAAO,CAAA,2BAAA,gBAAgB,CAAC,OAAO,cAAxB,sCAAA,2BAA4B;AACrC;AAEO,SAAS,kBAAkB,KAAa;QACtC;IAAP,OAAO,CAAA,yBAAA,eAAe,CAAC,MAAM,cAAtB,oCAAA,yBAA0B;AACnC;AAEO,SAAS,wBAAwB,MAAc;QAC7C;IAAP,OAAO,CAAA,gCAAA,qBAAqB,CAAC,OAAO,cAA7B,2CAAA,gCAAiC,EAAE;AAC5C","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/lib/live-store.ts"],"sourcesContent":["import { create } from \"zustand\";\nimport type {\n  BrainEvent,\n  BrainEventEnvelope,\n  EmotionalStateEvent,\n  SystemVitalsEvent,\n  ThoughtLoopTickEvent,\n} from \"./brain-events\";\nimport {\n  getRegionForCollection,\n  getRegionForWorker,\n  getRegionForQueue,\n} from \"./collection-mapping\";\n\nexport interface RegionActivity {\n  regionId: string;\n  intensity: number;\n  lastActivity: number;\n  activeOperations: Set<string>;\n}\n\nexport interface ActiveWorker {\n  worker: string;\n  jobId: string;\n  startedAt: number;\n  regionId: string | null;\n}\n\nexport interface QueueStatus {\n  queue: string;\n  pending: number;\n  active: number;\n  completed: number;\n  failed: number;\n}\n\nexport interface LiveStore {\n  connected: boolean;\n  connectionError: string | null;\n  eventsPerSecond: number;\n\n  recentEvents: BrainEventEnvelope[];\n  maxRecentEvents: number;\n\n  regionActivity: Map<string, RegionActivity>;\n  activeWorkers: Map<string, ActiveWorker>;\n  queueStatus: Map<string, QueueStatus>;\n\n  emotionalState: EmotionalStateEvent | null;\n  systemVitals: SystemVitalsEvent | null;\n  lastThoughtTick: ThoughtLoopTickEvent | null;\n  thoughtLoopPulse: number;\n\n  selectedRegionId: string | null;\n  hoveredRegionId: string | null;\n\n  setConnected: (connected: boolean, error?: string | null) => void;\n  setEventsPerSecond: (rate: number) => void;\n  processEvent: (envelope: BrainEventEnvelope) => void;\n  processHistory: (envelopes: BrainEventEnvelope[]) => void;\n  selectRegion: (id: string | null) => void;\n  hoverRegion: (id: string | null) => void;\n  decayActivity: () => void;\n  triggerThoughtPulse: () => void;\n}\n\nconst ACTIVITY_DECAY_RATE = 0.92;\nconst MIN_ACTIVITY_THRESHOLD = 0.05;\nconst MAX_RECENT_EVENTS = 200;\n\nexport const useLiveStore = create<LiveStore>((set, get) => ({\n  connected: false,\n  connectionError: null,\n  eventsPerSecond: 0,\n\n  recentEvents: [],\n  maxRecentEvents: MAX_RECENT_EVENTS,\n\n  regionActivity: new Map(),\n  activeWorkers: new Map(),\n  queueStatus: new Map(),\n\n  emotionalState: null,\n  systemVitals: null,\n  lastThoughtTick: null,\n  thoughtLoopPulse: 0,\n\n  selectedRegionId: null,\n  hoveredRegionId: null,\n\n  setConnected: (connected, error = null) =>\n    set({ connected, connectionError: error }),\n\n  setEventsPerSecond: (rate) => set({ eventsPerSecond: rate }),\n\n  processEvent: (envelope) => {\n    const state = get();\n    const event = envelope.event;\n    const now = Date.now();\n\n    const newRecentEvents = [...state.recentEvents, envelope].slice(\n      -state.maxRecentEvents\n    );\n\n    const updates: Partial<LiveStore> = { recentEvents: newRecentEvents };\n    const newRegionActivity = new Map(state.regionActivity);\n    const newActiveWorkers = new Map(state.activeWorkers);\n    const newQueueStatus = new Map(state.queueStatus);\n\n    switch (event.type) {\n      case \"thought_loop_tick\":\n        updates.lastThoughtTick = event;\n        updates.thoughtLoopPulse = 1;\n        break;\n\n      case \"collection_activity\": {\n        const regionId = getRegionForCollection(event.collection);\n        if (regionId) {\n          activateRegion(newRegionActivity, regionId, now, event.collection);\n        }\n        break;\n      }\n\n      case \"worker_activity\": {\n        const regionId = getRegionForWorker(event.worker);\n        if (event.status === \"started\") {\n          newActiveWorkers.set(event.job_id, {\n            worker: event.worker,\n            jobId: event.job_id,\n            startedAt: now,\n            regionId,\n          });\n          if (regionId) {\n            activateRegion(newRegionActivity, regionId, now, event.worker);\n          }\n        } else {\n          newActiveWorkers.delete(event.job_id);\n        }\n        updates.activeWorkers = newActiveWorkers;\n        break;\n      }\n\n      case \"queue_metrics\": {\n        newQueueStatus.set(event.queue, {\n          queue: event.queue,\n          pending: event.pending,\n          active: event.active,\n          completed: event.completed,\n          failed: event.failed,\n        });\n        updates.queueStatus = newQueueStatus;\n\n        const regionId = getRegionForQueue(event.queue);\n        if (regionId && event.active > 0) {\n          activateRegion(newRegionActivity, regionId, now, event.queue);\n        }\n        break;\n      }\n\n      case \"emotional_state\":\n        updates.emotionalState = event;\n        break;\n\n      case \"system_vitals\":\n        updates.systemVitals = event;\n        break;\n\n      case \"soul_cycle\": {\n        activateRegion(newRegionActivity, \"left-hemisphere\", now, \"soul_cycle\");\n        break;\n      }\n\n      case \"action_dispatch\": {\n        activateRegion(newRegionActivity, \"left-hemisphere\", now, \"action_dispatch\");\n        break;\n      }\n\n      case \"memory_event\": {\n        activateRegion(newRegionActivity, \"hippocampus\", now, \"memory\");\n        break;\n      }\n\n      case \"reward_signal\": {\n        activateRegion(newRegionActivity, \"nucleus-accumbens\", now, \"reward\");\n        break;\n      }\n\n      case \"error_correction\": {\n        activateRegion(newRegionActivity, \"cerebellum\", now, \"error_correction\");\n        break;\n      }\n    }\n\n    updates.regionActivity = newRegionActivity;\n    set(updates);\n  },\n\n  processHistory: (envelopes) => {\n    for (const envelope of envelopes) {\n      get().processEvent(envelope);\n    }\n  },\n\n  selectRegion: (id) => set({ selectedRegionId: id }),\n  hoverRegion: (id) => set({ hoveredRegionId: id }),\n\n  decayActivity: () => {\n    const state = get();\n    const newRegionActivity = new Map<string, RegionActivity>();\n    const now = Date.now();\n\n    for (const [regionId, activity] of state.regionActivity) {\n      const timeSinceActivity = now - activity.lastActivity;\n      const decayFactor = Math.pow(ACTIVITY_DECAY_RATE, timeSinceActivity / 100);\n      const newIntensity = activity.intensity * decayFactor;\n\n      if (newIntensity > MIN_ACTIVITY_THRESHOLD) {\n        newRegionActivity.set(regionId, {\n          ...activity,\n          intensity: newIntensity,\n        });\n      }\n    }\n\n    const newPulse = state.thoughtLoopPulse * 0.95;\n\n    set({\n      regionActivity: newRegionActivity,\n      thoughtLoopPulse: newPulse < 0.01 ? 0 : newPulse,\n    });\n  },\n\n  triggerThoughtPulse: () => set({ thoughtLoopPulse: 1 }),\n}));\n\nfunction activateRegion(\n  activityMap: Map<string, RegionActivity>,\n  regionId: string,\n  now: number,\n  operation: string\n): void {\n  const existing = activityMap.get(regionId);\n  const newIntensity = existing\n    ? Math.min(existing.intensity + 0.3, 1)\n    : 0.5;\n\n  const activeOperations = existing?.activeOperations ?? new Set();\n  activeOperations.add(operation);\n\n  activityMap.set(regionId, {\n    regionId,\n    intensity: newIntensity,\n    lastActivity: now,\n    activeOperations,\n  });\n}\n\nexport function getFilteredEvents(\n  events: BrainEventEnvelope[],\n  regionId: string | null,\n  types?: BrainEvent[\"type\"][]\n): BrainEventEnvelope[] {\n  return events.filter((envelope) => {\n    if (types && !types.includes(envelope.event.type)) {\n      return false;\n    }\n\n    if (!regionId) return true;\n\n    const event = envelope.event;\n    switch (event.type) {\n      case \"collection_activity\":\n        return getRegionForCollection(event.collection) === regionId;\n      case \"worker_activity\":\n        return getRegionForWorker(event.worker) === regionId;\n      case \"queue_metrics\":\n        return getRegionForQueue(event.queue) === regionId;\n      default:\n        return true;\n    }\n  });\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 363, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/lib/brain-model-loader.ts"],"sourcesContent":["import * as THREE from \"three\";\n\ninterface BrainModelJSON {\n  model: {\n    vertices: number[];\n    normals: number[];\n    faces: number[];\n    uvs: number[][];\n    name: string;\n  };\n}\n\n/**\n * Parses a brainfacts.org JSON brain model into a Three.js BufferGeometry.\n * The format uses a flag-based face array:\n *   flag & 1  = isQuad (4 verts) vs triangle (3 verts)\n *   flag & 8  = hasFaceVertexUv\n *   flag & 32 = hasFaceVertexNormal\n */\nexport function parseBrainModel(json: BrainModelJSON): THREE.BufferGeometry {\n  const { vertices, normals, faces } = json.model;\n\n  const srcPositions = vertices;\n  const srcNormals = normals;\n\n  const outPositions: number[] = [];\n  const outNormals: number[] = [];\n\n  let i = 0;\n  while (i < faces.length) {\n    const flag = faces[i++];\n    const isQuad = !!(flag & 1);\n    const hasMaterial = !!(flag & 2);\n    const hasFaceVertexUv = !!(flag & 8);\n    const hasFaceVertexNormal = !!(flag & 32);\n    const hasFaceVertexColor = !!(flag & 128);\n\n    const nVerts = isQuad ? 4 : 3;\n    const vertIndices: number[] = [];\n    for (let v = 0; v < nVerts; v++) vertIndices.push(faces[i++]);\n\n    if (hasMaterial) i++;\n    const normalIndices: number[] = [];\n\n    if (hasFaceVertexUv) i += nVerts;\n\n    if (hasFaceVertexNormal) {\n      for (let v = 0; v < nVerts; v++) normalIndices.push(faces[i++]);\n    }\n\n    if (hasFaceVertexColor) i += nVerts;\n\n    // Emit triangle(s)\n    const triSets = isQuad\n      ? [[0, 1, 2], [0, 2, 3]]\n      : [[0, 1, 2]];\n\n    for (const tri of triSets) {\n      for (const t of tri) {\n        const vi = vertIndices[t];\n        outPositions.push(\n          srcPositions[vi * 3],\n          srcPositions[vi * 3 + 1],\n          srcPositions[vi * 3 + 2]\n        );\n\n        if (normalIndices.length > 0) {\n          const ni = normalIndices[t];\n          outNormals.push(\n            srcNormals[ni * 3],\n            srcNormals[ni * 3 + 1],\n            srcNormals[ni * 3 + 2]\n          );\n        } else {\n          outNormals.push(\n            srcNormals[vi * 3],\n            srcNormals[vi * 3 + 1],\n            srcNormals[vi * 3 + 2]\n          );\n        }\n      }\n    }\n  }\n\n  const geometry = new THREE.BufferGeometry();\n  geometry.setAttribute(\n    \"position\",\n    new THREE.Float32BufferAttribute(outPositions, 3)\n  );\n  geometry.setAttribute(\n    \"normal\",\n    new THREE.Float32BufferAttribute(outNormals, 3)\n  );\n\n  return geometry;\n}\n\nexport interface BrainModelEntry {\n  id: string;\n  name: string;\n  file: string;\n  parent: string | null;\n  color: string;\n  opacity: number;\n  category: string;\n}\n\nexport const BRAIN_MODEL_REGISTRY: BrainModelEntry[] = [\n  // Cerebral hemispheres\n  { id: \"left-hemisphere\", name: \"Left Hemisphere\", file: \"Brain-cerebral_hemisphere-left.json\", parent: null, color: \"#6366f1\", opacity: 0.3, category: \"cerebrum\" },\n  { id: \"right-hemisphere\", name: \"Right Hemisphere\", file: \"Brain-cerebral_hemisphere-right.json\", parent: null, color: \"#818cf8\", opacity: 0.3, category: \"cerebrum\" },\n\n  // Cerebellum\n  { id: \"cerebellum\", name: \"Cerebellum\", file: \"Brain-cerebellum.json\", parent: null, color: \"#8b5cf6\", opacity: 0.55, category: \"cerebellum\" },\n\n  // Brainstem\n  { id: \"midbrain\", name: \"Midbrain\", file: \"Brain-brain_stem-midbrain.json\", parent: null, color: \"#ec4899\", opacity: 0.6, category: \"brainstem\" },\n  { id: \"pons\", name: \"Pons\", file: \"Brain-brain_stem-pons.json\", parent: null, color: \"#f472b6\", opacity: 0.6, category: \"brainstem\" },\n  { id: \"medulla\", name: \"Medulla Oblongata\", file: \"Brain-brain_stem-medulla_oblongata.json\", parent: null, color: \"#db2777\", opacity: 0.6, category: \"brainstem\" },\n\n  // Limbic system\n  { id: \"hippocampus\", name: \"Hippocampus\", file: \"Brain-limbic_system-hippocampus-hippocampus.json\", parent: null, color: \"#f97316\", opacity: 0.75, category: \"limbic\" },\n  { id: \"amygdala\", name: \"Amygdala\", file: \"Brain-limbic_system-amygdala.json\", parent: null, color: \"#ef4444\", opacity: 0.75, category: \"limbic\" },\n  { id: \"hypothalamus\", name: \"Hypothalamus\", file: \"Brain-limbic_system-hypothalamus.json\", parent: null, color: \"#f59e0b\", opacity: 0.75, category: \"limbic\" },\n  { id: \"entorhinal-cortex\", name: \"Entorhinal Cortex\", file: \"Brain-limbic_system-entorhinal_cortex.json\", parent: null, color: \"#fb923c\", opacity: 0.7, category: \"limbic\" },\n  { id: \"dentate-gyrus\", name: \"Dentate Gyrus\", file: \"Brain-limbic_system-hippocampus-dentate_gyrus.json\", parent: null, color: \"#fdba74\", opacity: 0.7, category: \"limbic\" },\n  { id: \"subiculum\", name: \"Subiculum\", file: \"Brain-limbic_system-hippocampus-subiculum.json\", parent: null, color: \"#fed7aa\", opacity: 0.65, category: \"limbic\" },\n\n  // Thalamus & related\n  { id: \"thalamus\", name: \"Thalamus\", file: \"Brain-thalamus.json\", parent: null, color: \"#f97316\", opacity: 0.65, category: \"limbic\" },\n  { id: \"corpus-callosum\", name: \"Corpus Callosum\", file: \"Brain-corpus_callosum.json\", parent: null, color: \"#e2e8f0\", opacity: 0.4, category: \"cerebrum\" },\n  { id: \"ventricles\", name: \"Ventricles\", file: \"Brain-ventricles.json\", parent: null, color: \"#38bdf8\", opacity: 0.3, category: \"organ\" },\n  { id: \"pituitary\", name: \"Pituitary Gland\", file: \"Brain-pituitary_gland.json\", parent: null, color: \"#fbbf24\", opacity: 0.7, category: \"endocrine\" },\n  { id: \"olfactory-bulb\", name: \"Olfactory Bulb\", file: \"Brain-olfactory_bulb.json\", parent: null, color: \"#a3e635\", opacity: 0.65, category: \"peripheral\" },\n  { id: \"auditory-cortex\", name: \"Primary Auditory Cortex\", file: \"Brain-primary_auditory_cortex.json\", parent: null, color: \"#2dd4bf\", opacity: 0.65, category: \"cerebrum\" },\n\n  // Basal ganglia\n  { id: \"caudate-nucleus\", name: \"Caudate Nucleus\", file: \"Brain-basal_ganglia-caudate_nucleus.json\", parent: null, color: \"#fb923c\", opacity: 0.7, category: \"limbic\" },\n  { id: \"putamen\", name: \"Putamen\", file: \"Brain-basal_ganglia-putamen.json\", parent: null, color: \"#f97316\", opacity: 0.65, category: \"limbic\" },\n  { id: \"globus-pallidus\", name: \"Globus Pallidus\", file: \"Brain-basal_ganglia-globus_pallidus.json\", parent: null, color: \"#ea580c\", opacity: 0.65, category: \"limbic\" },\n  { id: \"nucleus-accumbens\", name: \"Nucleus Accumbens\", file: \"Brain-basal_ganglia-nucleus_accumbens.json\", parent: null, color: \"#c2410c\", opacity: 0.7, category: \"limbic\" },\n  { id: \"substantia-nigra\", name: \"Substantia Nigra\", file: \"Brain-basal_ganglia-substantia_nigra.json\", parent: null, color: \"#9a3412\", opacity: 0.7, category: \"brainstem\" },\n  { id: \"subthalamic-nucleus\", name: \"Subthalamic Nucleus\", file: \"Brain-basal_ganglia-subthalamic_nucleus.json\", parent: null, color: \"#7c2d12\", opacity: 0.7, category: \"limbic\" },\n\n  // Cranial nerves\n  { id: \"cn-i\", name: \"CN I — Olfactory\", file: \"Brain-cranial_nerves-cranial_nerve_I_olfactory.json\", parent: null, color: \"#a3e635\", opacity: 0.6, category: \"peripheral\" },\n  { id: \"cn-ii\", name: \"CN II — Optic\", file: \"Brain-cranial_nerves-cranial_nerve_II_optic.json\", parent: null, color: \"#60a5fa\", opacity: 0.6, category: \"peripheral\" },\n  { id: \"cn-iii\", name: \"CN III — Oculomotor\", file: \"Brain-cranial_nerves-cranial_nerve_III_oculomotor.json\", parent: null, color: \"#f97316\", opacity: 0.55, category: \"peripheral\" },\n  { id: \"cn-iv\", name: \"CN IV — Trochlear\", file: \"Brain-cranial_nerves-cranial_nerve_IV_trochlear.json\", parent: null, color: \"#f97316\", opacity: 0.55, category: \"peripheral\" },\n  { id: \"cn-v\", name: \"CN V — Trigeminal\", file: \"Brain-cranial_nerves-cranial_nerve_V_trigeminal.json\", parent: null, color: \"#e879f9\", opacity: 0.6, category: \"peripheral\" },\n  { id: \"cn-vi\", name: \"CN VI — Abducens\", file: \"Brain-cranial_nerves-cranial_nerve_VI_abducens.json\", parent: null, color: \"#f97316\", opacity: 0.55, category: \"peripheral\" },\n  { id: \"cn-vii\", name: \"CN VII — Facial\", file: \"Brain-cranial_nerves-cranial_nerve_VII_facial.json\", parent: null, color: \"#fbbf24\", opacity: 0.6, category: \"peripheral\" },\n  { id: \"cn-viii\", name: \"CN VIII — Vestibulocochlear\", file: \"Brain-cranial_nerves-cranial_nerve_VIII_vestibulocochlear.json\", parent: null, color: \"#2dd4bf\", opacity: 0.6, category: \"peripheral\" },\n  { id: \"cn-ix\", name: \"CN IX — Glossopharyngeal\", file: \"Brain-cranial_nerves-cranial_nerve_IX_glossopharyngeal.json\", parent: null, color: \"#fb923c\", opacity: 0.55, category: \"peripheral\" },\n  { id: \"cn-x\", name: \"CN X — Vagus\", file: \"Brain-cranial_nerves-cranial_nerve_X_vagus.json\", parent: null, color: \"#22c55e\", opacity: 0.65, category: \"peripheral\" },\n  { id: \"cn-xi\", name: \"CN XI — Accessory\", file: \"Brain-cranial_nerves-cranial_nerve_XI_accessory.json\", parent: null, color: \"#f87171\", opacity: 0.55, category: \"peripheral\" },\n  { id: \"cn-xii\", name: \"CN XII — Hypoglossal\", file: \"Brain-cranial_nerves-cranial_nerve_XII_hypoglossal.json\", parent: null, color: \"#c084fc\", opacity: 0.55, category: \"peripheral\" },\n];\n\n// Which models to show in which layer groups\nexport const LAYER_GROUPS = {\n  hemispheres: [\"left-hemisphere\", \"right-hemisphere\", \"corpus-callosum\", \"auditory-cortex\", \"olfactory-bulb\"],\n  cerebellum: [\"cerebellum\"],\n  brainstem: [\"midbrain\", \"pons\", \"medulla\", \"substantia-nigra\"],\n  limbic: [\"hippocampus\", \"amygdala\", \"hypothalamus\", \"entorhinal-cortex\", \"dentate-gyrus\", \"subiculum\", \"thalamus\"],\n  deepStructures: [\"ventricles\", \"pituitary\"],\n  basalGanglia: [\"caudate-nucleus\", \"putamen\", \"globus-pallidus\", \"nucleus-accumbens\", \"subthalamic-nucleus\"],\n  cranialNerves: [\"cn-i\", \"cn-ii\", \"cn-iii\", \"cn-iv\", \"cn-v\", \"cn-vi\", \"cn-vii\", \"cn-viii\", \"cn-ix\", \"cn-x\", \"cn-xi\", \"cn-xii\"],\n};\n\n// Default visibility — show hemispheres transparent + key structures\nexport const DEFAULT_VISIBLE = new Set([\n  \"left-hemisphere\", \"right-hemisphere\",\n  \"cerebellum\",\n  \"midbrain\", \"pons\", \"medulla\",\n  \"thalamus\", \"corpus-callosum\",\n]);\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 838, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/shaders/NeuralBrainMaterial.tsx"],"sourcesContent":["\"use client\";\n\nimport { shaderMaterial } from \"@react-three/drei\";\nimport * as THREE from \"three\";\nimport { extend } from \"@react-three/fiber\";\n\nconst NeuralBrainMaterial = shaderMaterial(\n  {\n    time: 0,\n    baseColor: new THREE.Color(0x00d4ff),\n    glowColor: new THREE.Color(0x00ffff),\n    activityIntensity: 0,\n    opacity: 0.6,\n    fresnelPower: 2.5,\n    pulseSpeed: 1.0,\n    wireframeOpacity: 0.4,\n  },\n  // Vertex shader\n  `\n    varying vec3 vNormal;\n    varying vec3 vViewPosition;\n    varying vec2 vUv;\n    varying vec3 vWorldPosition;\n    \n    void main() {\n      vUv = uv;\n      vNormal = normalize(normalMatrix * normal);\n      vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n      vViewPosition = -mvPosition.xyz;\n      vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n      gl_Position = projectionMatrix * mvPosition;\n    }\n  `,\n  // Fragment shader\n  `\n    uniform float time;\n    uniform vec3 baseColor;\n    uniform vec3 glowColor;\n    uniform float activityIntensity;\n    uniform float opacity;\n    uniform float fresnelPower;\n    uniform float pulseSpeed;\n    uniform float wireframeOpacity;\n    \n    varying vec3 vNormal;\n    varying vec3 vViewPosition;\n    varying vec2 vUv;\n    varying vec3 vWorldPosition;\n    \n    // Simplex noise for organic variation\n    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n    vec4 permute(vec4 x) { return mod289(((x*34.0)+1.0)*x); }\n    vec4 taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\n    \n    float snoise(vec3 v) {\n      const vec2 C = vec2(1.0/6.0, 1.0/3.0);\n      const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n      \n      vec3 i  = floor(v + dot(v, C.yyy));\n      vec3 x0 = v - i + dot(i, C.xxx);\n      \n      vec3 g = step(x0.yzx, x0.xyz);\n      vec3 l = 1.0 - g;\n      vec3 i1 = min(g.xyz, l.zxy);\n      vec3 i2 = max(g.xyz, l.zxy);\n      \n      vec3 x1 = x0 - i1 + C.xxx;\n      vec3 x2 = x0 - i2 + C.yyy;\n      vec3 x3 = x0 - D.yyy;\n      \n      i = mod289(i);\n      vec4 p = permute(permute(permute(\n                i.z + vec4(0.0, i1.z, i2.z, 1.0))\n              + i.y + vec4(0.0, i1.y, i2.y, 1.0))\n              + i.x + vec4(0.0, i1.x, i2.x, 1.0));\n              \n      float n_ = 0.142857142857;\n      vec3 ns = n_ * D.wyz - D.xzx;\n      \n      vec4 j = p - 49.0 * floor(p * ns.z * ns.z);\n      \n      vec4 x_ = floor(j * ns.z);\n      vec4 y_ = floor(j - 7.0 * x_);\n      \n      vec4 x = x_ *ns.x + ns.yyyy;\n      vec4 y = y_ *ns.x + ns.yyyy;\n      vec4 h = 1.0 - abs(x) - abs(y);\n      \n      vec4 b0 = vec4(x.xy, y.xy);\n      vec4 b1 = vec4(x.zw, y.zw);\n      \n      vec4 s0 = floor(b0)*2.0 + 1.0;\n      vec4 s1 = floor(b1)*2.0 + 1.0;\n      vec4 sh = -step(h, vec4(0.0));\n      \n      vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;\n      vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;\n      \n      vec3 p0 = vec3(a0.xy, h.x);\n      vec3 p1 = vec3(a0.zw, h.y);\n      vec3 p2 = vec3(a1.xy, h.z);\n      vec3 p3 = vec3(a1.zw, h.w);\n      \n      vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2,p2), dot(p3,p3)));\n      p0 *= norm.x;\n      p1 *= norm.y;\n      p2 *= norm.z;\n      p3 *= norm.w;\n      \n      vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n      m = m * m;\n      return 42.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n    }\n    \n    void main() {\n      // Fresnel effect for edge glow\n      vec3 viewDir = normalize(vViewPosition);\n      float fresnel = pow(1.0 - abs(dot(viewDir, vNormal)), fresnelPower);\n      \n      // Animated noise for organic pulsing\n      float noise = snoise(vWorldPosition * 0.3 + time * 0.2 * pulseSpeed) * 0.5 + 0.5;\n      float pulse = sin(time * pulseSpeed * 2.0) * 0.3 + 0.7;\n      \n      // Activity-based intensity boost\n      float activityPulse = sin(time * 6.0) * 0.2 + 0.8;\n      float activityBoost = activityIntensity * activityPulse;\n      \n      // Combine effects\n      float edgeGlow = fresnel * (0.6 + noise * 0.4) * pulse;\n      edgeGlow += activityBoost * fresnel * 0.8;\n      \n      // Color mixing\n      vec3 finalColor = mix(baseColor, glowColor, edgeGlow);\n      finalColor += glowColor * activityBoost * 0.5;\n      \n      // Inner glow (subtle)\n      float innerGlow = (1.0 - fresnel) * 0.15 * (0.5 + noise * 0.5);\n      finalColor += baseColor * innerGlow;\n      \n      // Final alpha with fresnel-based transparency\n      float alpha = opacity * (0.3 + fresnel * 0.7 + activityBoost * 0.3);\n      alpha = clamp(alpha, 0.0, 1.0);\n      \n      gl_FragColor = vec4(finalColor, alpha);\n    }\n  `\n);\n\nextend({ NeuralBrainMaterial });\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      neuralBrainMaterial: React.DetailedHTMLProps<\n        React.HTMLAttributes<HTMLElement> & {\n          time?: number;\n          baseColor?: THREE.Color;\n          glowColor?: THREE.Color;\n          activityIntensity?: number;\n          opacity?: number;\n          fresnelPower?: number;\n          pulseSpeed?: number;\n          wireframeOpacity?: number;\n          transparent?: boolean;\n          side?: THREE.Side;\n          depthWrite?: boolean;\n        },\n        HTMLElement\n      >;\n    }\n  }\n}\n\nexport { NeuralBrainMaterial };\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAMA,MAAM,sBAAsB,IAAA,uLAAc,EACxC;IACE,MAAM;IACN,WAAW,IAAI,2JAAW,CAAC;IAC3B,WAAW,IAAI,2JAAW,CAAC;IAC3B,mBAAmB;IACnB,SAAS;IACT,cAAc;IACd,YAAY;IACZ,kBAAkB;AACpB,GAEC,8bAgBA;AAmHH,IAAA,0NAAM,EAAC;IAAE;AAAoB","debugId":null}},
    {"offset": {"line": 870, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/NeuralBrain3DViewer.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  useRef,\n  useState,\n  useEffect,\n  useMemo,\n  createContext,\n  useContext,\n} from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { Text, Html } from \"@react-three/drei\";\nimport { useLiveStore } from \"@/lib/live-store\";\nimport {\n  parseBrainModel,\n  BRAIN_MODEL_REGISTRY,\n  type BrainModelEntry,\n} from \"@/lib/brain-model-loader\";\nimport { getCollectionsForRegion } from \"@/lib/collection-mapping\";\nimport \"./shaders/NeuralBrainMaterial\";\n\nconst geometryCache = new Map<string, THREE.BufferGeometry>();\nconst loadingSet = new Set<string>();\n\nfunction useBrainGeometry(file: string): THREE.BufferGeometry | null {\n  const [geometry, setGeometry] = useState<THREE.BufferGeometry | null>(\n    geometryCache.get(file) ?? null\n  );\n\n  useEffect(() => {\n    if (geometryCache.has(file)) {\n      setGeometry(geometryCache.get(file)!);\n      return;\n    }\n    if (loadingSet.has(file)) return;\n    loadingSet.add(file);\n\n    fetch(`/models/brain/${file}`)\n      .then((r) => r.json())\n      .then((json) => {\n        const geo = parseBrainModel(json);\n        geometryCache.set(file, geo);\n        setGeometry(geo);\n      })\n      .catch(() => loadingSet.delete(file));\n  }, [file]);\n\n  return geometry;\n}\n\ninterface NeuralBrainViewState {\n  visibleIds: Set<string>;\n}\n\nconst NeuralBrainViewContext = createContext<NeuralBrainViewState>({\n  visibleIds: new Set(BRAIN_MODEL_REGISTRY.map((e) => e.id)),\n});\n\nexport function NeuralBrainViewProvider({\n  visibleIds,\n  children,\n}: {\n  visibleIds: Set<string>;\n  children: React.ReactNode;\n}) {\n  return (\n    <NeuralBrainViewContext.Provider value={{ visibleIds }}>\n      {children}\n    </NeuralBrainViewContext.Provider>\n  );\n}\n\n// Cyan color palette for neural look\nconst NEURAL_COLORS = {\n  base: new THREE.Color(0x00a8cc),      // Darker cyan base\n  glow: new THREE.Color(0x00ffff),      // Bright cyan glow\n  active: new THREE.Color(0x00ff88),    // Green-cyan for activity\n  highlight: new THREE.Color(0x88ffff), // Light cyan highlight\n};\n\nfunction NeuralBrainRegionMesh({ entry }: { entry: BrainModelEntry }) {\n  const geometry = useBrainGeometry(entry.file);\n  const meshRef = useRef<THREE.Mesh>(null);\n  const wireframeRef = useRef<THREE.LineSegments>(null);\n  const matRef = useRef<THREE.ShaderMaterial>(null);\n  const [hovered, setHovered] = useState(false);\n\n  const {\n    selectedRegionId,\n    selectRegion,\n    hoverRegion,\n    regionActivity,\n    thoughtLoopPulse,\n  } = useLiveStore();\n\n  const isSelected = selectedRegionId === entry.id;\n  const activity = regionActivity.get(entry.id);\n  const activityIntensity = activity?.intensity ?? 0;\n  const collections = getCollectionsForRegion(entry.id);\n\n  // Create wireframe geometry\n  const wireframeGeo = useMemo(() => {\n    if (!geometry) return null;\n    return new THREE.WireframeGeometry(geometry);\n  }, [geometry]);\n\n  useFrame(({ clock }) => {\n    if (!matRef.current) return;\n\n    const time = clock.getElapsedTime();\n    matRef.current.uniforms.time.value = time;\n\n    // Activity intensity\n    let targetActivity = activityIntensity;\n    if (isSelected) targetActivity = Math.max(targetActivity, 0.5);\n    if (hovered) targetActivity = Math.max(targetActivity, 0.3);\n\n    matRef.current.uniforms.activityIntensity.value = THREE.MathUtils.lerp(\n      matRef.current.uniforms.activityIntensity.value,\n      targetActivity,\n      0.1\n    );\n\n    // Pulse speed based on thought loop\n    matRef.current.uniforms.pulseSpeed.value = 1 + thoughtLoopPulse * 0.5;\n\n    // Update wireframe opacity\n    if (wireframeRef.current) {\n      const wireMat = wireframeRef.current.material as THREE.LineBasicMaterial;\n      const targetWireOpacity = 0.15 + activityIntensity * 0.3 + (hovered ? 0.2 : 0) + (isSelected ? 0.25 : 0);\n      wireMat.opacity = THREE.MathUtils.lerp(wireMat.opacity, targetWireOpacity, 0.1);\n    }\n  });\n\n  if (!geometry) return null;\n\n  return (\n    <group>\n      {/* Main neural mesh with custom shader */}\n      <mesh\n        ref={meshRef}\n        geometry={geometry}\n        onClick={(e) => {\n          e.stopPropagation();\n          selectRegion(isSelected ? null : entry.id);\n        }}\n        onPointerEnter={(e) => {\n          e.stopPropagation();\n          setHovered(true);\n          hoverRegion(entry.id);\n          document.body.style.cursor = \"pointer\";\n        }}\n        onPointerLeave={() => {\n          setHovered(false);\n          hoverRegion(null);\n          document.body.style.cursor = \"\";\n        }}\n      >\n        <neuralBrainMaterial\n          ref={matRef}\n          time={0}\n          baseColor={NEURAL_COLORS.base}\n          glowColor={NEURAL_COLORS.glow}\n          activityIntensity={0}\n          opacity={0.5}\n          fresnelPower={2.2}\n          pulseSpeed={1}\n          transparent\n          side={THREE.DoubleSide}\n          depthWrite={false}\n        />\n      </mesh>\n\n      {/* Wireframe overlay */}\n      {wireframeGeo && (\n        <lineSegments ref={wireframeRef} geometry={wireframeGeo}>\n          <lineBasicMaterial\n            color={NEURAL_COLORS.glow}\n            transparent\n            opacity={0.15}\n            blending={THREE.AdditiveBlending}\n            depthWrite={false}\n          />\n        </lineSegments>\n      )}\n\n      {/* Labels */}\n      {(hovered || isSelected || activityIntensity > 0.3) && geometry && (\n        <NeuralRegionLabel\n          entry={entry}\n          geometry={geometry}\n          activityIntensity={activityIntensity}\n          collections={collections}\n          isSelected={isSelected}\n        />\n      )}\n    </group>\n  );\n}\n\nfunction NeuralRegionLabel({\n  entry,\n  geometry,\n  activityIntensity,\n  collections,\n  isSelected,\n}: {\n  entry: BrainModelEntry;\n  geometry: THREE.BufferGeometry;\n  activityIntensity: number;\n  collections: string[];\n  isSelected: boolean;\n}) {\n  const center = useMemo(() => {\n    geometry.computeBoundingBox();\n    const box = geometry.boundingBox!;\n    const c = new THREE.Vector3();\n    box.getCenter(c);\n    c.y = box.max.y + 0.6;\n    return c;\n  }, [geometry]);\n\n  return (\n    <group position={[center.x, center.y, center.z]}>\n      <Text\n        fontSize={0.45}\n        color={isSelected ? \"#00ffff\" : \"#88ddff\"}\n        anchorX=\"center\"\n        anchorY=\"bottom\"\n        outlineWidth={0.025}\n        outlineColor=\"#000000\"\n        font=\"/fonts/inter-medium.woff\"\n      >\n        {entry.name}\n      </Text>\n      {activityIntensity > 0.1 && (\n        <Html center position={[0, 0.7, 0]}>\n          <div className=\"bg-black/70 backdrop-blur-sm rounded-lg px-2.5 py-1.5 text-[10px] whitespace-nowrap border border-cyan-500/30 shadow-lg shadow-cyan-500/20\">\n            <span className=\"text-cyan-400 font-medium\">\n              {collections.length > 0\n                ? `${collections.length} collection${collections.length > 1 ? \"s\" : \"\"}`\n                : \"Active\"}\n            </span>\n            <span className=\"text-cyan-600 ml-1.5\">\n              {Math.round(activityIntensity * 100)}%\n            </span>\n          </div>\n        </Html>\n      )}\n    </group>\n  );\n}\n\nfunction LoadingProgress({\n  loaded,\n  total,\n}: {\n  loaded: number;\n  total: number;\n}) {\n  if (loaded >= total) return null;\n  return (\n    <Html center position={[0, 12, 0]}>\n      <div className=\"bg-black/60 backdrop-blur-xl rounded-xl px-5 py-3 text-xs text-cyan-400 whitespace-nowrap border border-cyan-500/20\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-4 h-4 border-2 border-cyan-500/30 border-t-cyan-400 rounded-full animate-spin\" />\n          Loading neural map... {loaded}/{total}\n        </div>\n      </div>\n    </Html>\n  );\n}\n\nexport default function NeuralBrain3DViewer() {\n  const { visibleIds } = useContext(NeuralBrainViewContext);\n  const [loadedCount, setLoadedCount] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => setLoadedCount(geometryCache.size), 200);\n    return () => clearInterval(interval);\n  }, []);\n\n  const visibleEntries = useMemo(\n    () => BRAIN_MODEL_REGISTRY.filter((e) => visibleIds.has(e.id)),\n    [visibleIds]\n  );\n\n  return (\n    <group>\n      <LoadingProgress loaded={loadedCount} total={visibleEntries.length} />\n      {visibleEntries.map((entry) => (\n        <NeuralBrainRegionMesh key={entry.id} entry={entry} />\n      ))}\n    </group>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1274, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/NeuralParticles.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRef, useMemo } from \"react\";\nimport { useFrame } from \"@react-three/fiber\";\nimport * as THREE from \"three\";\nimport { useLiveStore } from \"@/lib/live-store\";\n\ninterface Particle {\n  position: THREE.Vector3;\n  velocity: THREE.Vector3;\n  life: number;\n  maxLife: number;\n  size: number;\n  brightness: number;\n}\n\nconst PARTICLE_COUNT = 200;\nconst BRAIN_BOUNDS = {\n  min: new THREE.Vector3(-8, 0, -6),\n  max: new THREE.Vector3(8, 16, 6),\n};\n\nexport default function NeuralParticles() {\n  const pointsRef = useRef<THREE.Points>(null);\n  const { eventsPerSecond, regionActivity, thoughtLoopPulse } = useLiveStore();\n\n  const particles = useMemo<Particle[]>(() => {\n    return Array.from({ length: PARTICLE_COUNT }, () => ({\n      position: new THREE.Vector3(\n        THREE.MathUtils.randFloat(BRAIN_BOUNDS.min.x, BRAIN_BOUNDS.max.x),\n        THREE.MathUtils.randFloat(BRAIN_BOUNDS.min.y, BRAIN_BOUNDS.max.y),\n        THREE.MathUtils.randFloat(BRAIN_BOUNDS.min.z, BRAIN_BOUNDS.max.z)\n      ),\n      velocity: new THREE.Vector3(\n        THREE.MathUtils.randFloatSpread(0.02),\n        THREE.MathUtils.randFloat(0.01, 0.04),\n        THREE.MathUtils.randFloatSpread(0.02)\n      ),\n      life: Math.random(),\n      maxLife: THREE.MathUtils.randFloat(2, 5),\n      size: THREE.MathUtils.randFloat(0.08, 0.25),\n      brightness: Math.random(),\n    }));\n  }, []);\n\n  const [positions, colors, sizes] = useMemo(() => {\n    const pos = new Float32Array(PARTICLE_COUNT * 3);\n    const col = new Float32Array(PARTICLE_COUNT * 3);\n    const siz = new Float32Array(PARTICLE_COUNT);\n    return [pos, col, siz];\n  }, []);\n\n  useFrame((state, delta) => {\n    if (!pointsRef.current) return;\n\n    const geometry = pointsRef.current.geometry;\n    const posAttr = geometry.attributes.position as THREE.BufferAttribute;\n    const colAttr = geometry.attributes.color as THREE.BufferAttribute;\n    const sizeAttr = geometry.attributes.size as THREE.BufferAttribute;\n\n    // Activity level affects particle behavior\n    const activityLevel = Math.min(eventsPerSecond / 20, 1);\n    const totalRegionActivity = Array.from(regionActivity.values()).reduce(\n      (sum, r) => sum + r.intensity,\n      0\n    );\n    const normalizedActivity = Math.min(totalRegionActivity / 5, 1);\n\n    // Colors: cyan base, orange for active particles\n    const cyanColor = new THREE.Color(0x00d4ff);\n    const orangeColor = new THREE.Color(0xff6b35);\n    const whiteColor = new THREE.Color(0xffffff);\n\n    for (let i = 0; i < PARTICLE_COUNT; i++) {\n      const p = particles[i];\n\n      // Update life\n      p.life += delta / p.maxLife;\n\n      // Respawn if dead\n      if (p.life >= 1) {\n        p.life = 0;\n        p.maxLife = THREE.MathUtils.randFloat(2, 5);\n        p.position.set(\n          THREE.MathUtils.randFloat(BRAIN_BOUNDS.min.x, BRAIN_BOUNDS.max.x),\n          BRAIN_BOUNDS.min.y + Math.random() * 2,\n          THREE.MathUtils.randFloat(BRAIN_BOUNDS.min.z, BRAIN_BOUNDS.max.z)\n        );\n        p.velocity.set(\n          THREE.MathUtils.randFloatSpread(0.02),\n          THREE.MathUtils.randFloat(0.02, 0.06) * (1 + activityLevel),\n          THREE.MathUtils.randFloatSpread(0.02)\n        );\n        p.brightness = Math.random();\n        p.size = THREE.MathUtils.randFloat(0.08, 0.25);\n      }\n\n      // Movement with activity influence\n      const speedMult = 1 + activityLevel * 2 + thoughtLoopPulse * 0.5;\n      p.position.add(p.velocity.clone().multiplyScalar(speedMult));\n\n      // Slight drift toward center (brain shape)\n      const toCenter = new THREE.Vector3(0, 8, 0).sub(p.position).normalize();\n      p.position.add(toCenter.multiplyScalar(0.002));\n\n      // Bounds check with soft wrapping\n      if (p.position.y > BRAIN_BOUNDS.max.y) {\n        p.life = 1; // Force respawn\n      }\n      p.position.x = THREE.MathUtils.clamp(\n        p.position.x,\n        BRAIN_BOUNDS.min.x,\n        BRAIN_BOUNDS.max.x\n      );\n      p.position.z = THREE.MathUtils.clamp(\n        p.position.z,\n        BRAIN_BOUNDS.min.z,\n        BRAIN_BOUNDS.max.z\n      );\n\n      // Update position buffer\n      posAttr.setXYZ(i, p.position.x, p.position.y, p.position.z);\n\n      // Life-based fade (fade in, stay, fade out)\n      const lifeFade =\n        p.life < 0.1\n          ? p.life / 0.1\n          : p.life > 0.8\n            ? (1 - p.life) / 0.2\n            : 1;\n\n      // Color: mix between cyan and orange based on activity and randomness\n      const isActiveParticle = p.brightness > 0.7 && normalizedActivity > 0.3;\n      const particleColor = isActiveParticle\n        ? orangeColor.clone().lerp(whiteColor, normalizedActivity * 0.3)\n        : cyanColor.clone().lerp(whiteColor, p.brightness * 0.2);\n\n      colAttr.setXYZ(\n        i,\n        particleColor.r * lifeFade,\n        particleColor.g * lifeFade,\n        particleColor.b * lifeFade\n      );\n\n      // Size with pulse\n      const sizePulse = Math.sin(state.clock.elapsedTime * 3 + i) * 0.3 + 1;\n      const activitySize = isActiveParticle ? 1.5 : 1;\n      sizeAttr.setX(i, p.size * lifeFade * sizePulse * activitySize);\n    }\n\n    posAttr.needsUpdate = true;\n    colAttr.needsUpdate = true;\n    sizeAttr.needsUpdate = true;\n  });\n\n  return (\n    <points ref={pointsRef}>\n      <bufferGeometry>\n        <bufferAttribute\n          attach=\"attributes-position\"\n          count={PARTICLE_COUNT}\n          array={positions}\n          itemSize={3}\n        />\n        <bufferAttribute\n          attach=\"attributes-color\"\n          count={PARTICLE_COUNT}\n          array={colors}\n          itemSize={3}\n        />\n        <bufferAttribute\n          attach=\"attributes-size\"\n          count={PARTICLE_COUNT}\n          array={sizes}\n          itemSize={1}\n        />\n      </bufferGeometry>\n      <pointsMaterial\n        size={0.15}\n        vertexColors\n        transparent\n        opacity={0.9}\n        sizeAttenuation\n        blending={THREE.AdditiveBlending}\n        depthWrite={false}\n      />\n    </points>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1464, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/NeuralEffects.tsx"],"sourcesContent":["\"use client\";\n\nimport { EffectComposer, Bloom, ChromaticAberration, Vignette, Noise } from \"@react-three/postprocessing\";\nimport { BlendFunction } from \"postprocessing\";\nimport { useLiveStore } from \"@/lib/live-store\";\nimport { Vector2 } from \"three\";\n\nexport default function NeuralEffects() {\n  const { eventsPerSecond, thoughtLoopPulse } = useLiveStore();\n\n  // Dynamic bloom based on activity\n  const activityLevel = Math.min(eventsPerSecond / 15, 1);\n  const bloomIntensity = 1.2 + activityLevel * 0.8 + thoughtLoopPulse * 0.3;\n\n  return (\n    <EffectComposer>\n      <Bloom\n        intensity={bloomIntensity}\n        luminanceThreshold={0.2}\n        luminanceSmoothing={0.9}\n        mipmapBlur\n        radius={0.8}\n      />\n      <ChromaticAberration\n        blendFunction={BlendFunction.NORMAL}\n        offset={new Vector2(0.0005 + activityLevel * 0.001, 0.0005 + activityLevel * 0.001)}\n        radialModulation={false}\n        modulationOffset={0}\n      />\n      <Vignette\n        offset={0.3}\n        darkness={0.7}\n        blendFunction={BlendFunction.NORMAL}\n      />\n      <Noise\n        premultiply\n        blendFunction={BlendFunction.SOFT_LIGHT}\n        opacity={0.15}\n      />\n    </EffectComposer>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,EAAE,eAAe,EAAE,gBAAgB,EAAE,GAAG,IAAA,uIAAY;IAE1D,kCAAkC;IAClC,MAAM,gBAAgB,KAAK,GAAG,CAAC,kBAAkB,IAAI;IACrD,MAAM,iBAAiB,MAAM,gBAAgB,MAAM,mBAAmB;IAEtE,qBACE,6LAAC,wLAAc;;0BACb,6LAAC,+KAAK;gBACJ,WAAW;gBACX,oBAAoB;gBACpB,oBAAoB;gBACpB,UAAU;gBACV,QAAQ;;;;;;0BAEV,6LAAC,6LAAmB;gBAClB,eAAe,oKAAa,CAAC,MAAM;gBACnC,QAAQ,IAAI,6JAAO,CAAC,SAAS,gBAAgB,OAAO,SAAS,gBAAgB;gBAC7E,kBAAkB;gBAClB,kBAAkB;;;;;;0BAEpB,6LAAC,kLAAQ;gBACP,QAAQ;gBACR,UAAU;gBACV,eAAe,oKAAa,CAAC,MAAM;;;;;;0BAErC,6LAAC,+KAAK;gBACJ,WAAW;gBACX,eAAe,oKAAa,CAAC,UAAU;gBACvC,SAAS;;;;;;;;;;;;AAIjB;GAlCwB;;QACwB,uIAAY;;;KADpC","debugId":null}},
    {"offset": {"line": 1549, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/LiveTopBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { useLiveStore } from \"@/lib/live-store\";\n\nexport default function LiveTopBar({\n  panelOpen,\n  onTogglePanel,\n}: {\n  panelOpen: boolean;\n  onTogglePanel: () => void;\n}) {\n  const { connected, eventsPerSecond, emotionalState, lastThoughtTick } =\n    useLiveStore();\n\n  const moodLabel = emotionalState?.mood ?? \"Unknown\";\n  const moodValence = emotionalState?.valence ?? 0;\n  const moodColor =\n    moodValence > 0.3\n      ? \"#22c55e\"\n      : moodValence < -0.3\n        ? \"#ef4444\"\n        : \"#f59e0b\";\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: -10 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: 0.2, duration: 0.4 }}\n      className=\"absolute top-4 left-1/2 -translate-x-1/2 z-30\"\n    >\n      <div className=\"backdrop-blur-xl bg-black/40 border border-white/[0.06] rounded-2xl px-1.5 py-1.5 flex items-center gap-1\">\n        <div className=\"px-3 flex items-center gap-2\">\n          <div\n            className=\"w-2 h-2 rounded-full transition-all duration-300\"\n            style={{\n              backgroundColor: connected ? \"#22c55e\" : \"#ef4444\",\n              boxShadow: connected\n                ? \"0 0 8px #22c55e80\"\n                : \"0 0 8px #ef444480\",\n            }}\n          />\n          <span className=\"text-xs font-semibold text-neutral-300 tracking-wide\">\n            LIVE VIEW\n          </span>\n        </div>\n\n        <div className=\"w-px h-5 bg-white/[0.06]\" />\n\n        <div className=\"px-3 flex items-center gap-3\">\n          <div className=\"flex items-center gap-1.5\">\n            <span className=\"text-[10px] text-neutral-500 uppercase\">\n              Events\n            </span>\n            <span className=\"text-xs font-mono text-cyan-400\">\n              {eventsPerSecond.toFixed(1)}/s\n            </span>\n          </div>\n\n          {lastThoughtTick && (\n            <>\n              <div className=\"w-px h-4 bg-white/[0.04]\" />\n              <div className=\"flex items-center gap-1.5\">\n                <span className=\"text-[10px] text-neutral-500 uppercase\">\n                  Mood\n                </span>\n                <span\n                  className=\"text-xs font-medium\"\n                  style={{ color: moodColor }}\n                >\n                  {moodLabel}\n                </span>\n              </div>\n              <div className=\"w-px h-4 bg-white/[0.04]\" />\n              <div className=\"flex items-center gap-1.5\">\n                <span className=\"text-[10px] text-neutral-500 uppercase\">\n                  Energy\n                </span>\n                <span className=\"text-xs font-mono text-purple-400\">\n                  {((lastThoughtTick.energy ?? 0) * 100).toFixed(0)}%\n                </span>\n              </div>\n            </>\n          )}\n        </div>\n\n        <div className=\"w-px h-5 bg-white/[0.06]\" />\n\n        <button\n          onClick={onTogglePanel}\n          className={`px-3 py-1.5 rounded-xl text-xs font-medium transition-all duration-200 ${\n            panelOpen\n              ? \"bg-indigo-500/15 text-indigo-400 border border-indigo-500/20\"\n              : \"text-neutral-500 hover:text-neutral-300 hover:bg-white/[0.04]\"\n          }`}\n        >\n          Processes\n        </button>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKe,SAAS,WAAW,KAMlC;QANkC,EACjC,SAAS,EACT,aAAa,EAId,GANkC;;IAOjC,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,cAAc,EAAE,eAAe,EAAE,GACnE,IAAA,uIAAY;QAEI;IAAlB,MAAM,YAAY,CAAA,uBAAA,2BAAA,qCAAA,eAAgB,IAAI,cAApB,kCAAA,uBAAwB;QACtB;IAApB,MAAM,cAAc,CAAA,0BAAA,2BAAA,qCAAA,eAAgB,OAAO,cAAvB,qCAAA,0BAA2B;IAC/C,MAAM,YACJ,cAAc,MACV,YACA,cAAc,CAAC,MACb,YACA;QAyDW;IAvDnB,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC9B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,OAAO;YAAK,UAAU;QAAI;QACxC,WAAU;kBAEV,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,WAAU;4BACV,OAAO;gCACL,iBAAiB,YAAY,YAAY;gCACzC,WAAW,YACP,sBACA;4BACN;;;;;;sCAEF,6LAAC;4BAAK,WAAU;sCAAuD;;;;;;;;;;;;8BAKzE,6LAAC;oBAAI,WAAU;;;;;;8BAEf,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAK,WAAU;8CAAyC;;;;;;8CAGzD,6LAAC;oCAAK,WAAU;;wCACb,gBAAgB,OAAO,CAAC;wCAAG;;;;;;;;;;;;;wBAI/B,iCACC;;8CACE,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;sDAAyC;;;;;;sDAGzD,6LAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO;4CAAU;sDAEzB;;;;;;;;;;;;8CAGL,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAK,WAAU;sDAAyC;;;;;;sDAGzD,6LAAC;4CAAK,WAAU;;gDACb,CAAC,CAAC,CAAA,0BAAA,gBAAgB,MAAM,cAAtB,qCAAA,0BAA0B,CAAC,IAAI,GAAG,EAAE,OAAO,CAAC;gDAAG;;;;;;;;;;;;;;;;;;;;;8BAO5D,6LAAC;oBAAI,WAAU;;;;;;8BAEf,6LAAC;oBACC,SAAS;oBACT,WAAW,AAAC,0EAIX,OAHC,YACI,iEACA;8BAEP;;;;;;;;;;;;;;;;;AAMT;GAhGwB;;QAQpB,uIAAY;;;KARQ","debugId":null}},
    {"offset": {"line": 1777, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/LiveProcessPanel.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useLiveStore, getFilteredEvents } from \"@/lib/live-store\";\nimport { BRAIN_MODEL_REGISTRY } from \"@/lib/brain-model-loader\";\nimport { getCollectionsForRegion } from \"@/lib/collection-mapping\";\nimport type { BrainEvent } from \"@/lib/brain-events\";\n\nfunction formatTimestamp(ts: string): string {\n  const date = new Date(ts);\n  return date.toLocaleTimeString(\"en-US\", {\n    hour12: false,\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n  });\n}\n\nfunction formatDuration(ms: number): string {\n  if (ms < 1000) return `${ms}ms`;\n  return `${(ms / 1000).toFixed(1)}s`;\n}\n\nfunction EventIcon({ type }: { type: BrainEvent[\"type\"] }) {\n  const icons: Record<BrainEvent[\"type\"], { icon: string; color: string }> = {\n    thought_loop_tick: { icon: \"◉\", color: \"#818cf8\" },\n    collection_activity: { icon: \"◆\", color: \"#22c55e\" },\n    worker_activity: { icon: \"⚙\", color: \"#f59e0b\" },\n    queue_metrics: { icon: \"▤\", color: \"#06b6d4\" },\n    emotional_state: { icon: \"♥\", color: \"#ec4899\" },\n    soul_cycle: { icon: \"✧\", color: \"#a78bfa\" },\n    action_dispatch: { icon: \"→\", color: \"#fb923c\" },\n    system_vitals: { icon: \"♡\", color: \"#ef4444\" },\n    budget_status: { icon: \"$\", color: \"#eab308\" },\n    memory_event: { icon: \"◇\", color: \"#14b8a6\" },\n    reward_signal: { icon: \"★\", color: \"#f472b6\" },\n    error_correction: { icon: \"⟳\", color: \"#8b5cf6\" },\n  };\n\n  const { icon, color } = icons[type] ?? { icon: \"•\", color: \"#666\" };\n\n  return (\n    <span className=\"text-xs\" style={{ color }}>\n      {icon}\n    </span>\n  );\n}\n\nfunction EventSummary({ event }: { event: BrainEvent }) {\n  switch (event.type) {\n    case \"thought_loop_tick\":\n      return (\n        <span>\n          Thought tick{\" \"}\n          {event.impulse && (\n            <span className=\"text-indigo-400\">(impulse)</span>\n          )}\n        </span>\n      );\n    case \"collection_activity\":\n      return (\n        <span>\n          <span className=\"text-cyan-400 font-mono\">{event.collection}</span>{\" \"}\n          <span className=\"text-neutral-500\">{event.operation}</span>{\" \"}\n          <span className=\"text-neutral-400\">×{event.count}</span>\n        </span>\n      );\n    case \"worker_activity\":\n      return (\n        <span>\n          <span className=\"text-amber-400\">{event.worker}</span>{\" \"}\n          <span\n            className={\n              event.status === \"completed\"\n                ? \"text-emerald-500\"\n                : event.status === \"failed\"\n                  ? \"text-red-500\"\n                  : \"text-neutral-500\"\n            }\n          >\n            {event.status}\n          </span>\n          {event.duration_ms && (\n            <span className=\"text-neutral-600 ml-1\">\n              {formatDuration(event.duration_ms)}\n            </span>\n          )}\n        </span>\n      );\n    case \"queue_metrics\":\n      return (\n        <span>\n          <span className=\"text-cyan-400 font-mono\">{event.queue}</span>{\" \"}\n          <span className=\"text-neutral-500\">\n            {event.pending}p / {event.active}a\n          </span>\n        </span>\n      );\n    case \"emotional_state\":\n      return (\n        <span>\n          Mood:{\" \"}\n          <span\n            className={\n              event.valence > 0.3\n                ? \"text-emerald-400\"\n                : event.valence < -0.3\n                  ? \"text-red-400\"\n                  : \"text-amber-400\"\n            }\n          >\n            {event.mood}\n          </span>\n        </span>\n      );\n    case \"soul_cycle\":\n      return (\n        <span>\n          Soul cycle{\" \"}\n          <span className=\"text-purple-400\">{event.tier}</span>{\" \"}\n          <span className=\"text-neutral-500\">{event.status}</span>\n        </span>\n      );\n    case \"action_dispatch\":\n      return (\n        <span>\n          Action:{\" \"}\n          <span className=\"text-orange-400\">{event.action}</span>{\" \"}\n          <span className=\"text-neutral-500\">→ {event.target}</span>\n        </span>\n      );\n    case \"system_vitals\":\n      return (\n        <span>\n          Vitals: CPU {event.cpu_percent.toFixed(0)}% / Mem{\" \"}\n          {event.memory_percent.toFixed(0)}%\n        </span>\n      );\n    case \"memory_event\":\n      return (\n        <span>\n          Memory <span className=\"text-teal-400\">{event.operation}</span>\n        </span>\n      );\n    case \"reward_signal\":\n      return (\n        <span>\n          Reward:{\" \"}\n          <span\n            className={\n              event.prediction_error > 0 ? \"text-emerald-400\" : \"text-red-400\"\n            }\n          >\n            {event.prediction_error > 0 ? \"+\" : \"\"}\n            {event.prediction_error.toFixed(2)}\n          </span>\n        </span>\n      );\n    case \"error_correction\":\n      return (\n        <span>\n          Error correction:{\" \"}\n          <span className=\"text-purple-400\">{event.source}</span>\n        </span>\n      );\n    default:\n      return <span>{event.type}</span>;\n  }\n}\n\nexport default function LiveProcessPanel() {\n  const {\n    recentEvents,\n    activeWorkers,\n    selectedRegionId,\n    selectRegion,\n    regionActivity,\n  } = useLiveStore();\n\n  const selectedRegion = selectedRegionId\n    ? BRAIN_MODEL_REGISTRY.find((r) => r.id === selectedRegionId)\n    : null;\n\n  const filteredEvents = useMemo(() => {\n    return getFilteredEvents(recentEvents, selectedRegionId).slice(-50);\n  }, [recentEvents, selectedRegionId]);\n\n  const activeRegions = useMemo(() => {\n    return Array.from(regionActivity.entries())\n      .filter(([, activity]) => activity.intensity > 0.1)\n      .sort((a, b) => b[1].intensity - a[1].intensity)\n      .slice(0, 8);\n  }, [regionActivity]);\n\n  const collections = selectedRegionId\n    ? getCollectionsForRegion(selectedRegionId)\n    : [];\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: 40 }}\n      animate={{ opacity: 1, x: 0 }}\n      exit={{ opacity: 0, x: 40 }}\n      transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\n      className=\"absolute top-20 right-4 bottom-20 z-20 w-[360px] max-w-[40vw] flex flex-col gap-3 overflow-hidden pointer-events-none\"\n    >\n      {selectedRegion && (\n        <div className=\"pointer-events-auto backdrop-blur-xl bg-black/50 border border-white/[0.06] rounded-2xl overflow-hidden shrink-0\">\n          <div\n            className=\"h-1 w-full\"\n            style={{\n              background: `linear-gradient(90deg, ${selectedRegion.color}, ${selectedRegion.color}00)`,\n            }}\n          />\n          <div className=\"p-4\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <div className=\"flex items-center gap-2\">\n                <span\n                  className=\"w-2.5 h-2.5 rounded-full\"\n                  style={{\n                    backgroundColor: selectedRegion.color,\n                    boxShadow: `0 0 8px ${selectedRegion.color}60`,\n                  }}\n                />\n                <span className=\"text-sm font-semibold text-white\">\n                  {selectedRegion.name}\n                </span>\n              </div>\n              <button\n                onClick={() => selectRegion(null)}\n                className=\"text-neutral-500 hover:text-neutral-300 transition-colors\"\n              >\n                <svg\n                  width=\"14\"\n                  height=\"14\"\n                  viewBox=\"0 0 24 24\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  strokeWidth=\"2\"\n                >\n                  <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                  <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                </svg>\n              </button>\n            </div>\n\n            {collections.length > 0 && (\n              <div className=\"mt-2\">\n                <span className=\"text-[10px] text-neutral-500 uppercase tracking-wider\">\n                  Collections ({collections.length})\n                </span>\n                <div className=\"flex flex-wrap gap-1 mt-1\">\n                  {collections.slice(0, 6).map((col) => (\n                    <span\n                      key={col}\n                      className=\"text-[10px] px-2 py-0.5 rounded-full bg-cyan-500/10 text-cyan-400 border border-cyan-500/20 font-mono\"\n                    >\n                      {col}\n                    </span>\n                  ))}\n                  {collections.length > 6 && (\n                    <span className=\"text-[10px] text-neutral-600\">\n                      +{collections.length - 6}\n                    </span>\n                  )}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {activeWorkers.size > 0 && (\n        <div className=\"pointer-events-auto backdrop-blur-xl bg-black/50 border border-white/[0.06] rounded-2xl p-4 shrink-0\">\n          <span className=\"text-[10px] text-neutral-500 uppercase tracking-widest font-semibold\">\n            Active Workers ({activeWorkers.size})\n          </span>\n          <div className=\"mt-2 space-y-1.5\">\n            {Array.from(activeWorkers.values())\n              .slice(0, 5)\n              .map((worker) => (\n                <div\n                  key={worker.jobId}\n                  className=\"flex items-center gap-2 text-xs\"\n                >\n                  <span className=\"w-1.5 h-1.5 rounded-full bg-amber-500 animate-pulse\" />\n                  <span className=\"text-amber-400\">{worker.worker}</span>\n                  <span className=\"text-neutral-600 font-mono text-[10px] ml-auto\">\n                    {formatDuration(Date.now() - worker.startedAt)}\n                  </span>\n                </div>\n              ))}\n          </div>\n        </div>\n      )}\n\n      {!selectedRegionId && activeRegions.length > 0 && (\n        <div className=\"pointer-events-auto backdrop-blur-xl bg-black/50 border border-white/[0.06] rounded-2xl p-4 shrink-0\">\n          <span className=\"text-[10px] text-neutral-500 uppercase tracking-widest font-semibold\">\n            Active Regions\n          </span>\n          <div className=\"mt-2 space-y-1.5\">\n            {activeRegions.map(([regionId, activity]) => {\n              const region = BRAIN_MODEL_REGISTRY.find(\n                (r) => r.id === regionId\n              );\n              if (!region) return null;\n              return (\n                <button\n                  key={regionId}\n                  onClick={() => selectRegion(regionId)}\n                  className=\"w-full flex items-center gap-2 text-xs hover:bg-white/[0.02] rounded px-1 py-0.5 transition-colors\"\n                >\n                  <span\n                    className=\"w-1.5 h-1.5 rounded-full\"\n                    style={{\n                      backgroundColor: region.color,\n                      boxShadow: `0 0 4px ${region.color}60`,\n                    }}\n                  />\n                  <span className=\"text-neutral-300\">{region.name}</span>\n                  <div className=\"ml-auto flex items-center gap-1\">\n                    <div className=\"w-12 h-1 bg-white/[0.06] rounded-full overflow-hidden\">\n                      <div\n                        className=\"h-full rounded-full transition-all duration-300\"\n                        style={{\n                          width: `${activity.intensity * 100}%`,\n                          backgroundColor: region.color,\n                        }}\n                      />\n                    </div>\n                  </div>\n                </button>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      <div className=\"pointer-events-auto backdrop-blur-xl bg-black/50 border border-white/[0.06] rounded-2xl flex-1 min-h-0 overflow-hidden flex flex-col\">\n        <div className=\"p-3 border-b border-white/[0.04] shrink-0\">\n          <span className=\"text-[10px] text-neutral-500 uppercase tracking-widest font-semibold\">\n            Event Stream\n            {selectedRegionId && (\n              <span className=\"text-indigo-400 ml-1\">(filtered)</span>\n            )}\n          </span>\n        </div>\n        <div\n          className=\"flex-1 overflow-y-auto p-2 space-y-1\"\n          style={{ scrollbarWidth: \"thin\" }}\n        >\n          {filteredEvents.length === 0 ? (\n            <div className=\"text-center py-8 text-neutral-600 text-xs\">\n              Waiting for events...\n            </div>\n          ) : (\n            filteredEvents.map((envelope) => (\n              <div\n                key={envelope.id}\n                className=\"flex items-start gap-2 px-2 py-1 rounded hover:bg-white/[0.02] transition-colors\"\n              >\n                <EventIcon type={envelope.event.type} />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"text-[11px] text-neutral-300 truncate\">\n                    <EventSummary event={envelope.event} />\n                  </div>\n                </div>\n                <span className=\"text-[9px] text-neutral-600 font-mono shrink-0\">\n                  {formatTimestamp(envelope.received_at)}\n                </span>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2632, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/LiveMetricsBar.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useLiveStore } from \"@/lib/live-store\";\n\nfunction MiniBarChart({\n  values,\n  max,\n  color,\n  label,\n}: {\n  values: number[];\n  max: number;\n  color: string;\n  label: string;\n}) {\n  const normalizedValues = values.map((v) => Math.min(v / max, 1));\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <span className=\"text-[9px] text-neutral-600 uppercase tracking-wider\">\n        {label}\n      </span>\n      <div className=\"flex items-end gap-px h-6\">\n        {normalizedValues.map((v, i) => (\n          <div\n            key={i}\n            className=\"w-1 rounded-t transition-all duration-200\"\n            style={{\n              height: `${Math.max(v * 100, 4)}%`,\n              backgroundColor: v > 0.7 ? \"#ef4444\" : color,\n              opacity: 0.3 + v * 0.7,\n            }}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nfunction GaugeIndicator({\n  value,\n  max,\n  label,\n  color,\n  unit = \"\",\n}: {\n  value: number;\n  max: number;\n  label: string;\n  color: string;\n  unit?: string;\n}) {\n  const percentage = Math.min((value / max) * 100, 100);\n\n  return (\n    <div className=\"flex flex-col gap-1\">\n      <span className=\"text-[9px] text-neutral-600 uppercase tracking-wider\">\n        {label}\n      </span>\n      <div className=\"flex items-center gap-2\">\n        <div className=\"w-16 h-1.5 bg-white/[0.06] rounded-full overflow-hidden\">\n          <motion.div\n            className=\"h-full rounded-full\"\n            style={{ backgroundColor: color }}\n            initial={{ width: 0 }}\n            animate={{ width: `${percentage}%` }}\n            transition={{ duration: 0.3 }}\n          />\n        </div>\n        <span className=\"text-[10px] font-mono\" style={{ color }}>\n          {value.toFixed(0)}\n          {unit}\n        </span>\n      </div>\n    </div>\n  );\n}\n\nexport default function LiveMetricsBar() {\n  const { queueStatus, systemVitals, emotionalState, connected, recentEvents } =\n    useLiveStore();\n\n  const queueDepths = useMemo(() => {\n    const depths: number[] = [];\n    for (const status of queueStatus.values()) {\n      depths.push(status.pending + status.active);\n    }\n    while (depths.length < 10) depths.push(0);\n    return depths.slice(-10);\n  }, [queueStatus]);\n\n  const totalQueueItems = useMemo(() => {\n    let total = 0;\n    for (const status of queueStatus.values()) {\n      total += status.pending + status.active;\n    }\n    return total;\n  }, [queueStatus]);\n\n  const recentEventCounts = useMemo(() => {\n    const now = Date.now();\n    const buckets = Array(10).fill(0);\n    const bucketSize = 1000;\n\n    for (const event of recentEvents.slice(-100)) {\n      const age = now - new Date(event.received_at).getTime();\n      const bucket = Math.floor(age / bucketSize);\n      if (bucket >= 0 && bucket < 10) {\n        buckets[9 - bucket]++;\n      }\n    }\n    return buckets;\n  }, [recentEvents]);\n\n  const valence = emotionalState?.valence ?? 0;\n  const arousal = emotionalState?.arousal ?? 0.5;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 20 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ delay: 0.4, duration: 0.4 }}\n      className=\"absolute bottom-4 left-4 right-4 z-20\"\n    >\n      <div className=\"backdrop-blur-xl bg-black/40 border border-white/[0.06] rounded-2xl px-4 py-3\">\n        <div className=\"flex items-center justify-between gap-6\">\n          <div className=\"flex items-center gap-1.5\">\n            <div\n              className=\"w-2 h-2 rounded-full transition-all duration-300\"\n              style={{\n                backgroundColor: connected ? \"#22c55e\" : \"#ef4444\",\n                boxShadow: connected\n                  ? \"0 0 6px #22c55e60\"\n                  : \"0 0 6px #ef444460\",\n              }}\n            />\n            <span className=\"text-[10px] text-neutral-500 uppercase tracking-wider\">\n              {connected ? \"Connected\" : \"Disconnected\"}\n            </span>\n          </div>\n\n          <div className=\"flex items-center gap-6\">\n            <MiniBarChart\n              values={recentEventCounts}\n              max={20}\n              color=\"#6366f1\"\n              label=\"Events\"\n            />\n\n            <MiniBarChart\n              values={queueDepths}\n              max={50}\n              color=\"#06b6d4\"\n              label=\"Queues\"\n            />\n\n            <div className=\"w-px h-8 bg-white/[0.06]\" />\n\n            {systemVitals && (\n              <>\n                <GaugeIndicator\n                  value={systemVitals.cpu_percent}\n                  max={100}\n                  label=\"CPU\"\n                  color={\n                    systemVitals.cpu_percent > 80 ? \"#ef4444\" : \"#22c55e\"\n                  }\n                  unit=\"%\"\n                />\n                <GaugeIndicator\n                  value={systemVitals.memory_percent}\n                  max={100}\n                  label=\"Memory\"\n                  color={\n                    systemVitals.memory_percent > 80 ? \"#ef4444\" : \"#06b6d4\"\n                  }\n                  unit=\"%\"\n                />\n              </>\n            )}\n\n            <div className=\"w-px h-8 bg-white/[0.06]\" />\n\n            <div className=\"flex flex-col gap-1\">\n              <span className=\"text-[9px] text-neutral-600 uppercase tracking-wider\">\n                Valence\n              </span>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-16 h-1.5 bg-white/[0.06] rounded-full overflow-hidden relative\">\n                  <div className=\"absolute inset-0 flex\">\n                    <div className=\"w-1/2 bg-gradient-to-r from-red-500/20 to-transparent\" />\n                    <div className=\"w-1/2 bg-gradient-to-l from-emerald-500/20 to-transparent\" />\n                  </div>\n                  <motion.div\n                    className=\"absolute top-0 bottom-0 w-1 rounded-full bg-white\"\n                    style={{ left: `${(valence + 1) * 50}%` }}\n                    animate={{ left: `${(valence + 1) * 50}%` }}\n                    transition={{ duration: 0.3 }}\n                  />\n                </div>\n                <span\n                  className=\"text-[10px] font-mono\"\n                  style={{\n                    color:\n                      valence > 0.3\n                        ? \"#22c55e\"\n                        : valence < -0.3\n                          ? \"#ef4444\"\n                          : \"#f59e0b\",\n                  }}\n                >\n                  {valence > 0 ? \"+\" : \"\"}\n                  {valence.toFixed(2)}\n                </span>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col gap-1\">\n              <span className=\"text-[9px] text-neutral-600 uppercase tracking-wider\">\n                Arousal\n              </span>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-16 h-1.5 bg-white/[0.06] rounded-full overflow-hidden\">\n                  <motion.div\n                    className=\"h-full rounded-full bg-purple-500\"\n                    animate={{ width: `${arousal * 100}%` }}\n                    transition={{ duration: 0.3 }}\n                  />\n                </div>\n                <span className=\"text-[10px] font-mono text-purple-400\">\n                  {(arousal * 100).toFixed(0)}%\n                </span>\n              </div>\n            </div>\n\n            <div className=\"w-px h-8 bg-white/[0.06]\" />\n\n            <div className=\"flex flex-col gap-0.5\">\n              <span className=\"text-[9px] text-neutral-600 uppercase tracking-wider\">\n                Queue Total\n              </span>\n              <span className=\"text-sm font-mono text-cyan-400\">\n                {totalQueueItems}\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 3132, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/useEventStream.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { useLiveStore } from \"@/lib/live-store\";\nimport type { BrainEventEnvelope } from \"@/lib/brain-events\";\n\ninterface StreamMessage {\n  type: \"brain_event\" | \"history\";\n  data: BrainEventEnvelope | BrainEventEnvelope[];\n}\n\nexport function useEventStream() {\n  const { setConnected, processEvent, processHistory, setEventsPerSecond } =\n    useLiveStore();\n  const eventSourceRef = useRef<EventSource | null>(null);\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const eventCountRef = useRef(0);\n  const lastCountTimeRef = useRef(Date.now());\n\n  useEffect(() => {\n    let mounted = true;\n\n    function connect() {\n      if (!mounted) return;\n\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n\n      const eventSource = new EventSource(\"/api/brain-events/stream\");\n      eventSourceRef.current = eventSource;\n\n      eventSource.onopen = () => {\n        if (!mounted) return;\n        setConnected(true);\n        console.log(\"[live] Connected to event stream\");\n      };\n\n      eventSource.onmessage = (event) => {\n        if (!mounted) return;\n\n        try {\n          const message: StreamMessage = JSON.parse(event.data);\n\n          if (message.type === \"history\") {\n            processHistory(message.data as BrainEventEnvelope[]);\n          } else if (message.type === \"brain_event\") {\n            processEvent(message.data as BrainEventEnvelope);\n            eventCountRef.current++;\n          }\n        } catch (err) {\n          console.error(\"[live] Failed to parse event:\", err);\n        }\n      };\n\n      eventSource.onerror = () => {\n        if (!mounted) return;\n        setConnected(false, \"Connection lost\");\n        eventSource.close();\n\n        reconnectTimeoutRef.current = setTimeout(() => {\n          if (mounted) {\n            console.log(\"[live] Reconnecting...\");\n            connect();\n          }\n        }, 3000);\n      };\n    }\n\n    connect();\n\n    const rateInterval = setInterval(() => {\n      const now = Date.now();\n      const elapsed = (now - lastCountTimeRef.current) / 1000;\n      if (elapsed > 0) {\n        setEventsPerSecond(eventCountRef.current / elapsed);\n        eventCountRef.current = 0;\n        lastCountTimeRef.current = now;\n      }\n    }, 1000);\n\n    return () => {\n      mounted = false;\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      clearInterval(rateInterval);\n    };\n  }, [setConnected, processEvent, processHistory, setEventsPerSecond]);\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;;AAHA;;;AAWO,SAAS;;IACd,MAAM,EAAE,YAAY,EAAE,YAAY,EAAE,cAAc,EAAE,kBAAkB,EAAE,GACtE,IAAA,uIAAY;IACd,MAAM,iBAAiB,IAAA,uKAAM,EAAqB;IAClD,MAAM,sBAAsB,IAAA,uKAAM,EAAwB;IAC1D,MAAM,gBAAgB,IAAA,uKAAM,EAAC;IAC7B,MAAM,mBAAmB,IAAA,uKAAM,EAAC,KAAK,GAAG;IAExC,IAAA,0KAAS;oCAAC;YACR,IAAI,UAAU;YAEd,SAAS;gBACP,IAAI,CAAC,SAAS;gBAEd,IAAI,eAAe,OAAO,EAAE;oBAC1B,eAAe,OAAO,CAAC,KAAK;gBAC9B;gBAEA,MAAM,cAAc,IAAI,YAAY;gBACpC,eAAe,OAAO,GAAG;gBAEzB,YAAY,MAAM;wDAAG;wBACnB,IAAI,CAAC,SAAS;wBACd,aAAa;wBACb,QAAQ,GAAG,CAAC;oBACd;;gBAEA,YAAY,SAAS;wDAAG,CAAC;wBACvB,IAAI,CAAC,SAAS;wBAEd,IAAI;4BACF,MAAM,UAAyB,KAAK,KAAK,CAAC,MAAM,IAAI;4BAEpD,IAAI,QAAQ,IAAI,KAAK,WAAW;gCAC9B,eAAe,QAAQ,IAAI;4BAC7B,OAAO,IAAI,QAAQ,IAAI,KAAK,eAAe;gCACzC,aAAa,QAAQ,IAAI;gCACzB,cAAc,OAAO;4BACvB;wBACF,EAAE,OAAO,KAAK;4BACZ,QAAQ,KAAK,CAAC,iCAAiC;wBACjD;oBACF;;gBAEA,YAAY,OAAO;wDAAG;wBACpB,IAAI,CAAC,SAAS;wBACd,aAAa,OAAO;wBACpB,YAAY,KAAK;wBAEjB,oBAAoB,OAAO,GAAG;gEAAW;gCACvC,IAAI,SAAS;oCACX,QAAQ,GAAG,CAAC;oCACZ;gCACF;4BACF;+DAAG;oBACL;;YACF;YAEA;YAEA,MAAM,eAAe;yDAAY;oBAC/B,MAAM,MAAM,KAAK,GAAG;oBACpB,MAAM,UAAU,CAAC,MAAM,iBAAiB,OAAO,IAAI;oBACnD,IAAI,UAAU,GAAG;wBACf,mBAAmB,cAAc,OAAO,GAAG;wBAC3C,cAAc,OAAO,GAAG;wBACxB,iBAAiB,OAAO,GAAG;oBAC7B;gBACF;wDAAG;YAEH;4CAAO;oBACL,UAAU;oBACV,IAAI,eAAe,OAAO,EAAE;wBAC1B,eAAe,OAAO,CAAC,KAAK;oBAC9B;oBACA,IAAI,oBAAoB,OAAO,EAAE;wBAC/B,aAAa,oBAAoB,OAAO;oBAC1C;oBACA,cAAc;gBAChB;;QACF;mCAAG;QAAC;QAAc;QAAc;QAAgB;KAAmB;AACrE;GAjFgB;;QAEZ,uIAAY","debugId":null}},
    {"offset": {"line": 3242, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/components/live/LiveBrainMonitor.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, useEffect, useMemo } from \"react\";\nimport { Canvas } from \"@react-three/fiber\";\nimport { OrbitControls, Stars } from \"@react-three/drei\";\nimport { Suspense } from \"react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { useLiveStore } from \"@/lib/live-store\";\nimport { LAYER_GROUPS } from \"@/lib/brain-model-loader\";\nimport { NeuralBrainViewProvider } from \"./NeuralBrain3DViewer\";\nimport NeuralBrain3DViewer from \"./NeuralBrain3DViewer\";\nimport NeuralParticles from \"./NeuralParticles\";\nimport NeuralEffects from \"./NeuralEffects\";\nimport LiveTopBar from \"./LiveTopBar\";\nimport LiveProcessPanel from \"./LiveProcessPanel\";\nimport LiveMetricsBar from \"./LiveMetricsBar\";\nimport { useEventStream } from \"./useEventStream\";\n\ntype LayerKey = keyof typeof LAYER_GROUPS;\n\nconst LAYER_TOGGLE_CONFIG: { key: LayerKey; label: string; color: string }[] = [\n  { key: \"hemispheres\", label: \"Cortex\", color: \"#6366f1\" },\n  { key: \"cerebellum\", label: \"Cerebellum\", color: \"#8b5cf6\" },\n  { key: \"brainstem\", label: \"Brainstem\", color: \"#ec4899\" },\n  { key: \"limbic\", label: \"Limbic\", color: \"#f97316\" },\n  { key: \"deepStructures\", label: \"Deep\", color: \"#38bdf8\" },\n  { key: \"basalGanglia\", label: \"Basal Ganglia\", color: \"#fb923c\" },\n  { key: \"cranialNerves\", label: \"Nerves\", color: \"#22c55e\" },\n];\n\nfunction LayerControls({\n  activeLayers,\n  onToggle,\n  onShowAll,\n}: {\n  activeLayers: Set<LayerKey>;\n  onToggle: (k: LayerKey) => void;\n  onShowAll: () => void;\n}) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, x: -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: 0.3, duration: 0.4 }}\n      className=\"absolute top-20 left-4 z-20 flex flex-col gap-1.5\"\n    >\n      <div className=\"backdrop-blur-xl bg-black/40 border border-white/[0.06] rounded-xl p-2 flex flex-col gap-1\">\n        <span className=\"text-[10px] text-neutral-500 uppercase tracking-widest font-semibold px-1 mb-0.5\">\n          Layers\n        </span>\n        {LAYER_TOGGLE_CONFIG.map(({ key, label, color }) => {\n          const active = activeLayers.has(key);\n          return (\n            <button\n              key={key}\n              onClick={() => onToggle(key)}\n              className=\"flex items-center gap-2 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all duration-200\"\n              style={{\n                background: active ? `${color}15` : \"transparent\",\n                color: active ? color : \"#525252\",\n              }}\n            >\n              <span\n                className=\"w-2 h-2 rounded-full transition-all duration-200\"\n                style={{\n                  backgroundColor: active ? color : \"#333\",\n                  boxShadow: active ? `0 0 6px ${color}60` : \"none\",\n                }}\n              />\n              {label}\n            </button>\n          );\n        })}\n        <div className=\"h-px bg-white/[0.04] my-1\" />\n        <button\n          onClick={onShowAll}\n          className=\"text-[10px] text-neutral-500 hover:text-neutral-300 px-2 py-1 transition-colors\"\n        >\n          Show All\n        </button>\n      </div>\n    </motion.div>\n  );\n}\n\nfunction ConnectionHint() {\n  const { connected, connectionError } = useLiveStore();\n\n  if (connected) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n      className=\"absolute bottom-24 left-1/2 -translate-x-1/2 z-10 pointer-events-none\"\n    >\n      <div className=\"backdrop-blur-xl bg-black/30 border border-white/[0.04] rounded-2xl px-5 py-3 text-center\">\n        <p className=\"text-xs text-neutral-400\">\n          {connectionError\n            ? `Connection error: ${connectionError}`\n            : \"Connecting to brain event stream...\"}\n        </p>\n        <p className=\"text-[10px] text-neutral-600 mt-0.5\">\n          Waiting for Molly to come online\n        </p>\n      </div>\n    </motion.div>\n  );\n}\n\nexport default function LiveBrainMonitor() {\n  const { selectRegion, decayActivity } = useLiveStore();\n\n  const [activeLayers, setActiveLayers] = useState<Set<LayerKey>>(\n    new Set<LayerKey>([\n      \"hemispheres\",\n      \"cerebellum\",\n      \"brainstem\",\n      \"limbic\",\n      \"basalGanglia\",\n      \"deepStructures\",\n    ])\n  );\n  const [panelOpen, setPanelOpen] = useState(true);\n\n  useEventStream();\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      decayActivity();\n    }, 50);\n    return () => clearInterval(interval);\n  }, [decayActivity]);\n\n  const visibleIds = useMemo(() => {\n    const ids = new Set<string>();\n    for (const key of activeLayers) {\n      for (const id of LAYER_GROUPS[key]) {\n        ids.add(id);\n      }\n    }\n    return ids;\n  }, [activeLayers]);\n\n  const toggleLayer = useCallback((key: LayerKey) => {\n    setActiveLayers((prev) => {\n      const next = new Set(prev);\n      if (next.has(key)) next.delete(key);\n      else next.add(key);\n      return next;\n    });\n  }, []);\n\n  const showAll = useCallback(() => {\n    setActiveLayers(new Set(Object.keys(LAYER_GROUPS) as LayerKey[]));\n  }, []);\n\n  return (\n    <div className=\"h-screen w-screen overflow-hidden bg-[#060609] relative\">\n      <Canvas\n        camera={{ position: [0, 10, 30], fov: 40 }}\n        gl={{ antialias: true, alpha: true }}\n        dpr={[1, 2]}\n        className=\"!absolute inset-0\"\n        onPointerMissed={() => selectRegion(null)}\n      >\n        <color attach=\"background\" args={[\"#030308\"]} />\n        <fog attach=\"fog\" args={[\"#030308\", 35, 70]} />\n        {/* Minimal ambient - let the glow do the work */}\n        <ambientLight intensity={0.15} />\n        {/* Subtle rim lights for depth */}\n        <directionalLight\n          position={[15, 20, 10]}\n          intensity={0.3}\n          color=\"#0088aa\"\n        />\n        <directionalLight\n          position={[-12, 8, -15]}\n          intensity={0.2}\n          color=\"#004466\"\n        />\n        {/* Accent lights for the neural glow */}\n        <pointLight\n          position={[0, 12, 10]}\n          intensity={0.5}\n          color=\"#00ffff\"\n          distance={40}\n        />\n        <pointLight\n          position={[0, 5, -8]}\n          intensity={0.3}\n          color=\"#0088ff\"\n          distance={25}\n        />\n        {/* Warm accent for contrast */}\n        <pointLight\n          position={[8, 8, 0]}\n          intensity={0.15}\n          color=\"#ff6600\"\n          distance={20}\n        />\n\n        <Suspense fallback={null}>\n          <NeuralBrainViewProvider visibleIds={visibleIds}>\n            <NeuralBrain3DViewer />\n          </NeuralBrainViewProvider>\n          <NeuralParticles />\n          <Stars\n            radius={120}\n            depth={100}\n            count={600}\n            factor={2.5}\n            saturation={0.1}\n            fade\n            speed={0.1}\n          />\n        </Suspense>\n        <NeuralEffects />\n\n        <OrbitControls\n          makeDefault\n          enableDamping\n          dampingFactor={0.06}\n          minDistance={12}\n          maxDistance={55}\n          enablePan\n          target={[0, 7, 0]}\n          rotateSpeed={0.5}\n        />\n      </Canvas>\n\n      <LiveTopBar panelOpen={panelOpen} onTogglePanel={() => setPanelOpen((v) => !v)} />\n      <LayerControls\n        activeLayers={activeLayers}\n        onToggle={toggleLayer}\n        onShowAll={showAll}\n      />\n\n      <AnimatePresence>\n        <ConnectionHint />\n      </AnimatePresence>\n\n      <AnimatePresence>\n        {panelOpen && <LiveProcessPanel />}\n      </AnimatePresence>\n\n      <LiveMetricsBar />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}