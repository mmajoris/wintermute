{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\nexport function middleware(req: NextRequest) {\n  const { pathname } = req.nextUrl;\n\n  // Public routes - no auth needed\n  const publicRoutes = [\"/\", \"/login\"];\n  const isPublicRoute = publicRoutes.includes(pathname);\n\n  // API routes for brain events (uses API key auth, not session)\n  if (pathname.startsWith(\"/api/brain-events\") && !pathname.includes(\"/stream\")) {\n    return NextResponse.next();\n  }\n\n  // Auth API routes\n  if (pathname.startsWith(\"/api/auth\")) {\n    return NextResponse.next();\n  }\n\n  // Check for session token\n  const sessionToken =\n    req.cookies.get(\"authjs.session-token\")?.value ||\n    req.cookies.get(\"__Secure-authjs.session-token\")?.value;\n\n  const isLoggedIn = !!sessionToken;\n\n  // Protected routes require login\n  if (!isPublicRoute && !isLoggedIn) {\n    const loginUrl = new URL(\"/login\", req.url);\n    loginUrl.searchParams.set(\"callbackUrl\", pathname);\n    return NextResponse.redirect(loginUrl);\n  }\n\n  // Redirect logged-in users away from login page\n  if (pathname === \"/login\" && isLoggedIn) {\n    return NextResponse.redirect(new URL(\"/explorer\", req.url));\n  }\n\n  return NextResponse.next();\n}\n\nexport const config = {\n  matcher: [\n    \"/((?!_next/static|_next/image|favicon.ico|models|.*\\\\.png$|.*\\\\.jpg$|.*\\\\.svg$).*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGO,SAAS,WAAW,GAAgB;IACzC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,iCAAiC;IACjC,MAAM,eAAe;QAAC;QAAK;KAAS;IACpC,MAAM,gBAAgB,aAAa,QAAQ,CAAC;IAE5C,+DAA+D;IAC/D,IAAI,SAAS,UAAU,CAAC,wBAAwB,CAAC,SAAS,QAAQ,CAAC,YAAY;QAC7E,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,kBAAkB;IAClB,IAAI,SAAS,UAAU,CAAC,cAAc;QACpC,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,0BAA0B;IAC1B,MAAM,eACJ,IAAI,OAAO,CAAC,GAAG,CAAC,yBAAyB,SACzC,IAAI,OAAO,CAAC,GAAG,CAAC,kCAAkC;IAEpD,MAAM,aAAa,CAAC,CAAC;IAErB,iCAAiC;IACjC,IAAI,CAAC,iBAAiB,CAAC,YAAY;QACjC,MAAM,WAAW,IAAI,IAAI,UAAU,IAAI,GAAG;QAC1C,SAAS,YAAY,CAAC,GAAG,CAAC,eAAe;QACzC,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,gDAAgD;IAChD,IAAI,aAAa,YAAY,YAAY;QACvC,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,aAAa,IAAI,GAAG;IAC3D;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}