{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 17, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport Credentials from \"next-auth/providers/credentials\";\nimport { compare } from \"bcryptjs\";\n\nconst ALLOWED_EMAIL = process.env.AUTH_ALLOWED_EMAIL;\n// Workaround: Next.js dotenv-expand interprets $ as variable expansion\n// So we store the hash as base64 and decode it here\nconst PASSWORD_HASH_B64 = process.env.AUTH_PASSWORD_HASH_B64;\nconst PASSWORD_HASH = PASSWORD_HASH_B64 \n  ? Buffer.from(PASSWORD_HASH_B64, 'base64').toString('utf-8')\n  : undefined;\nconst ALLOWED_IPS = process.env.AUTH_ALLOWED_IPS?.split(\",\").map((ip) => ip.trim()) ?? [];\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  providers: [\n    Credentials({\n      name: \"Password\",\n      credentials: {\n        email: { label: \"Email\", type: \"email\" },\n        password: { label: \"Password\", type: \"password\" },\n      },\n      async authorize(credentials, request) {\n        const email = credentials?.email as string;\n        const password = credentials?.password as string;\n\n        if (!email || !password) {\n          return null;\n        }\n\n        if (ALLOWED_EMAIL && email !== ALLOWED_EMAIL) {\n          console.warn(`[auth] Rejected login attempt for: ${email}`);\n          return null;\n        }\n\n        if (!PASSWORD_HASH) {\n          console.error(\"[auth] AUTH_PASSWORD_HASH not configured\");\n          return null;\n        }\n\n        const isValid = await compare(password, PASSWORD_HASH);\n        if (!isValid) {\n          console.warn(`[auth] Invalid password for: ${email}`);\n          return null;\n        }\n\n        // IP check (if configured)\n        if (ALLOWED_IPS.length > 0) {\n          const forwarded = request?.headers?.get?.(\"x-forwarded-for\");\n          const realIp = request?.headers?.get?.(\"x-real-ip\");\n          const clientIp = forwarded?.split(\",\")[0]?.trim() || realIp || \"unknown\";\n\n          if (!ALLOWED_IPS.includes(clientIp) && clientIp !== \"unknown\") {\n            console.warn(`[auth] IP not in allowlist: ${clientIp}`);\n            // Don't block, just log - IP detection can be unreliable\n          }\n        }\n\n        return {\n          id: \"1\",\n          email: email,\n          name: \"Admin\",\n        };\n      },\n    }),\n  ],\n  pages: {\n    signIn: \"/login\",\n    error: \"/login\",\n  },\n  callbacks: {\n    authorized({ auth, request }) {\n      const isLoggedIn = !!auth?.user;\n      const isOnProtectedRoute =\n        request.nextUrl.pathname.startsWith(\"/explorer\") ||\n        request.nextUrl.pathname.startsWith(\"/live\") ||\n        request.nextUrl.pathname.startsWith(\"/api/brain-events/stream\");\n\n      if (isOnProtectedRoute) {\n        return isLoggedIn;\n      }\n\n      return true;\n    },\n  },\n  session: {\n    strategy: \"jwt\",\n    maxAge: 7 * 24 * 60 * 60, // 7 days\n  },\n  trustHost: true,\n});\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;;;;AAEA,MAAM,gBAAgB,QAAQ,GAAG,CAAC,kBAAkB;AACpD,uEAAuE;AACvE,oDAAoD;AACpD,MAAM,oBAAoB,QAAQ,GAAG,CAAC,sBAAsB;AAC5D,MAAM,gBAAgB,oBAClB,OAAO,IAAI,CAAC,mBAAmB,UAAU,QAAQ,CAAC,WAClD;AACJ,MAAM,cAAc,QAAQ,GAAG,CAAC,gBAAgB,EAAE,MAAM,KAAK,IAAI,CAAC,KAAO,GAAG,IAAI,OAAO,EAAE;AAElF,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,gKAAQ,EAAC;IAC1D,WAAW;QACT,IAAA,qKAAW,EAAC;YACV,MAAM;YACN,aAAa;gBACX,OAAO;oBAAE,OAAO;oBAAS,MAAM;gBAAQ;gBACvC,UAAU;oBAAE,OAAO;oBAAY,MAAM;gBAAW;YAClD;YACA,MAAM,WAAU,WAAW,EAAE,OAAO;gBAClC,MAAM,QAAQ,aAAa;gBAC3B,MAAM,WAAW,aAAa;gBAE9B,IAAI,CAAC,SAAS,CAAC,UAAU;oBACvB,OAAO;gBACT;gBAEA,IAAI,iBAAiB,UAAU,eAAe;oBAC5C,QAAQ,IAAI,CAAC,CAAC,mCAAmC,EAAE,OAAO;oBAC1D,OAAO;gBACT;gBAEA,IAAI,CAAC,eAAe;oBAClB,QAAQ,KAAK,CAAC;oBACd,OAAO;gBACT;gBAEA,MAAM,UAAU,MAAM,IAAA,4IAAO,EAAC,UAAU;gBACxC,IAAI,CAAC,SAAS;oBACZ,QAAQ,IAAI,CAAC,CAAC,6BAA6B,EAAE,OAAO;oBACpD,OAAO;gBACT;gBAEA,2BAA2B;gBAC3B,IAAI,YAAY,MAAM,GAAG,GAAG;oBAC1B,MAAM,YAAY,SAAS,SAAS,MAAM;oBAC1C,MAAM,SAAS,SAAS,SAAS,MAAM;oBACvC,MAAM,WAAW,WAAW,MAAM,IAAI,CAAC,EAAE,EAAE,UAAU,UAAU;oBAE/D,IAAI,CAAC,YAAY,QAAQ,CAAC,aAAa,aAAa,WAAW;wBAC7D,QAAQ,IAAI,CAAC,CAAC,4BAA4B,EAAE,UAAU;oBACtD,yDAAyD;oBAC3D;gBACF;gBAEA,OAAO;oBACL,IAAI;oBACJ,OAAO;oBACP,MAAM;gBACR;YACF;QACF;KACD;IACD,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,WAAW;QACT,YAAW,EAAE,IAAI,EAAE,OAAO,EAAE;YAC1B,MAAM,aAAa,CAAC,CAAC,MAAM;YAC3B,MAAM,qBACJ,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,gBACpC,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,YACpC,QAAQ,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC;YAEtC,IAAI,oBAAoB;gBACtB,OAAO;YACT;YAEA,OAAO;QACT;IACF;IACA,SAAS;QACP,UAAU;QACV,QAAQ,IAAI,KAAK,KAAK;IACxB;IACA,WAAW;AACb","debugId":null}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/michaelmajoris/wintermute/app/page.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { auth } from \"@/auth\";\n\nexport default async function LandingPage() {\n  const session = await auth();\n  const isLoggedIn = !!session?.user;\n\n  return (\n    <div className=\"min-h-screen bg-[#060609] text-white overflow-hidden\">\n      {/* Background effects */}\n      <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-indigo-500/5 rounded-full blur-3xl\" />\n        <div className=\"absolute bottom-0 left-1/4 w-[600px] h-[600px] bg-purple-500/5 rounded-full blur-3xl\" />\n        <div className=\"absolute top-1/3 right-0 w-[500px] h-[500px] bg-cyan-500/5 rounded-full blur-3xl\" />\n        \n        {/* Grid overlay */}\n        <div\n          className=\"absolute inset-0 opacity-[0.02]\"\n          style={{\n            backgroundImage: `linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px),\n                              linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)`,\n            backgroundSize: \"50px 50px\",\n          }}\n        />\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"relative z-10 flex items-center justify-between px-8 py-6\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className=\"w-2.5 h-2.5 rounded-full bg-indigo-500\"\n            style={{ boxShadow: \"0 0 10px #6366f180\" }}\n          />\n          <span className=\"text-sm font-semibold tracking-widest text-neutral-300\">\n            WINTERMUTE\n          </span>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          {isLoggedIn ? (\n            <>\n              <Link\n                href=\"/explorer\"\n                className=\"px-4 py-2 text-sm text-neutral-400 hover:text-white transition-colors\"\n              >\n                Explorer\n              </Link>\n              <Link\n                href=\"/live\"\n                className=\"px-4 py-2 text-sm text-neutral-400 hover:text-white transition-colors\"\n              >\n                Live View\n              </Link>\n            </>\n          ) : (\n            <Link\n              href=\"/login\"\n              className=\"px-5 py-2 text-sm font-medium bg-white/[0.05] hover:bg-white/[0.08] border border-white/[0.06] rounded-lg transition-all\"\n            >\n              Access System\n            </Link>\n          )}\n        </div>\n      </nav>\n\n      {/* Hero Section */}\n      <main className=\"relative z-10 flex flex-col items-center justify-center min-h-[calc(100vh-200px)] px-8 text-center\">\n        <div className=\"max-w-4xl mx-auto\">\n          {/* Status indicator */}\n          <div className=\"inline-flex items-center gap-2 px-4 py-2 mb-8 rounded-full bg-white/[0.03] border border-white/[0.06]\">\n            <span className=\"relative flex h-2 w-2\">\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\n              <span className=\"relative inline-flex rounded-full h-2 w-2 bg-emerald-500\"></span>\n            </span>\n            <span className=\"text-xs text-neutral-400\">System Online</span>\n          </div>\n\n          {/* Main title */}\n          <h1 className=\"text-5xl md:text-7xl font-bold mb-6 tracking-tight\">\n            <span className=\"bg-gradient-to-r from-white via-white to-neutral-400 bg-clip-text text-transparent\">\n              Neural Architecture\n            </span>\n            <br />\n            <span className=\"bg-gradient-to-r from-indigo-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent\">\n              Visualization\n            </span>\n          </h1>\n\n          {/* Subtitle */}\n          <p className=\"text-lg md:text-xl text-neutral-500 mb-12 max-w-2xl mx-auto leading-relaxed\">\n            Real-time visualization of cognitive architecture. \n            Explore brain regions, monitor active processes, \n            and observe the mind in motion.\n          </p>\n\n          {/* CTA Buttons */}\n          <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4\">\n            {isLoggedIn ? (\n              <>\n                <Link\n                  href=\"/explorer\"\n                  className=\"group px-8 py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition-all duration-200 flex items-center gap-3\"\n                >\n                  <span>Open Explorer</span>\n                  <svg\n                    className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M13 7l5 5m0 0l-5 5m5-5H6\"\n                    />\n                  </svg>\n                </Link>\n                <Link\n                  href=\"/live\"\n                  className=\"px-8 py-4 bg-white/[0.03] hover:bg-white/[0.06] border border-white/[0.06] rounded-xl font-medium transition-all duration-200 flex items-center gap-3\"\n                >\n                  <span className=\"relative flex h-2 w-2\">\n                    <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75\"></span>\n                    <span className=\"relative inline-flex rounded-full h-2 w-2 bg-emerald-500\"></span>\n                  </span>\n                  <span>Live View</span>\n                </Link>\n              </>\n            ) : (\n              <Link\n                href=\"/login\"\n                className=\"group px-8 py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-medium transition-all duration-200 flex items-center gap-3\"\n              >\n                <span>Access System</span>\n                <svg\n                  className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"currentColor\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M13 7l5 5m0 0l-5 5m5-5H6\"\n                  />\n                </svg>\n              </Link>\n            )}\n          </div>\n        </div>\n\n        {/* Feature cards placeholder */}\n        <div className=\"mt-24 grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto w-full\">\n          <FeatureCard\n            icon=\"ðŸ§ \"\n            title=\"3D Brain Explorer\"\n            description=\"Interactive visualization of 60+ brain regions mapped to computational modules\"\n          />\n          <FeatureCard\n            icon=\"âš¡\"\n            title=\"Live Monitoring\"\n            description=\"Real-time activity visualization as cognitive processes execute\"\n          />\n          <FeatureCard\n            icon=\"ðŸ“Š\"\n            title=\"System Metrics\"\n            description=\"Queue depths, memory operations, emotional state, and budget tracking\"\n          />\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"relative z-10 py-8 text-center\">\n        <p className=\"text-xs text-neutral-700\">\n          Wintermute Neural Architecture Visualization System\n        </p>\n      </footer>\n    </div>\n  );\n}\n\nfunction FeatureCard({\n  icon,\n  title,\n  description,\n}: {\n  icon: string;\n  title: string;\n  description: string;\n}) {\n  return (\n    <div className=\"p-6 rounded-2xl bg-white/[0.02] border border-white/[0.04] hover:border-white/[0.08] transition-all duration-300\">\n      <div className=\"text-3xl mb-4\">{icon}</div>\n      <h3 className=\"text-lg font-semibold text-white mb-2\">{title}</h3>\n      <p className=\"text-sm text-neutral-500 leading-relaxed\">{description}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}